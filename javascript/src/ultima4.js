var ultima4 = {};

ultima4.gameData = (function() {
  var tiles = "data:image/png;base64,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";

  var lzwMapData = "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";

  var font = "ffffffffffffffffffffffffffffffff00ffffffffffffff00ffffffffffffffffffffffffffff00ffffffffffffff0000ffffffffffff0000ffffffffffff003f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3ffcfcfcfcfcfcfcfcfcfcfcfcfcfcfcfc3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3cffc3c3c3c3c3c3ffffddffffffffddff00030f1f3f3f7f7f00030f1f3f3f7f7f00c0f0f8fcfcfefe00c0f0f8fcfcfefe7f7f3f3f1f0f03007f7f3f3f1f0f0300fefefcfcf8f0c000fefefcfcf8f0c000183c7e181818181818181818187e3c18183c7e18187e3c180000387c7c38000000030f3f3f0f030000030f3f3f0f030000c0f0fcfcf0c00000c0f0fcfcf0c000000000000000000000181818180018180036366c00000000006cfe6c6cfe6c0000103c70381c78100000666c183666000070d8d876dcdc760018183000000000000c18303030180c0060301818183060000010387c381000000018187e1818000000000000181830000000007c000000000000000000181878cccc78fc30303000386c6c6c6c6c38000818381818183c00386c0c1830607c00386c0c380c6c38006c6c6c7c0c0c0c007c60780c0c6c38000c1830786c6c38007c0c0c1830303000386c6c386c6c3800386c6c3c18306000001818001818000000181800181808000c18306030180c0000007c007c0000006030180c18306000386c0c18001818ffffffffffffffff000e1e36363e3666007c36363c36367c001c36606060663c007c36363636367c007e30303c30307e003e30303c303060001c3660606e663c006666667e666666007e18181818187e003e06060666663c00666c7870786c66003030303030386e0042667e7e666666004666767e6e6662003c66666666663c007c66667c606070003c666666666c36007c66667c6c6666001c36603c06663c007e181818181818006666666666663c0066666666663c1800666666667e66420066663c183c6666006666663c181818007e060c7e30607e007c60606060607c001e0e1a386c6c38007c0c0c0c0c0c7c000010386c0000000038fefefefe38000000007e7e3c7e000000003c6c6c6c360030303c3636366c0000003c6660663c000c0c3c6c6c6c360000003c667e603e001c36307e3030600000003c663e067c00606060786c6c66000018001818183c000c000c0c6c6c38006060666c786c66003818181818183c00000042667e66660000006c766666660000003c6666663c0000007c667c60700000003e663c0c060000006c766060600000003c603c067c0030307c3030361c0000006c6c6c6c360000006666663c1800000066667e6642000000663c183c6600000066663e0c380000007e0c18307e003c66663c183c18007cfec6d6decc600078fcccd8c2fe7c000c66f6d6c6fe7c007cfe8636667e3c";

  var lzwTownMaps = "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";

  var townInhabitants = "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000201c18201c1800012f0f022e0f020010510904500904010e5111115011110009500d11500d110009501c1d501c1d01092c16182c1618010f500709500709010e50070b50070b010e510b0b500b0b010e510b09500b09010e500202500202010951041b50041b0109560f17560f17010d381415381415000c511d05501d0501092f15052e1505010b021508021508000a52151b52151b800052091b52091b800050111d50111d0009500d1d500d1d00090000000000000000000000000000000000000000000000000000000000000000000000000000000059071d58071d0010201d1d201d1d010f511707501707010e560e0c560e0c010d511a11501a110000381b0f381b0f000b381b0d381b0d000b38160f38160f000b2d041b2c041b010a2b021b2a021b010a27021d26021d010a20041d20041d010a200f17200f170009260302260302010820060e20060e000c51181b50181b000050061b50061b000053190b52190b000021130b20130b000750120f50120f0006510f0f500f0f0006260a04260a040005201502201502010450111c50111c0003510d1c500d1c00031f110a1f110a00021f100a1f100a000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000261d1a261d1a00102b120c2a120c000f580918580918000e2c1c062c1c06000d291d02281d02000c271609261609000b231502221502000a52100552100500095a0f155a0f1500085402145402140007510c0c500c0c000650090c50090c000650111a50111a0006510d1a500d1a00065006105006100105501b0e501b0e0105511a1b501a1b010550041b50041b010551020250020201053d09163d09160004521617521617010353131052131080001f0b071f0b0700021f0a071f0a07000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002a0e152a0e150010850f02840f02010f240305240305010e580b1d580b1d000d50031a50031a000c511b1a501b1a000b25161a24161a010a25081a24081a01095107095007090008500707500707000851070850070800085017075017070008501708501708000851170950170900085111095011090007510d09500d090007240c0c240c0c00062c09102c091001052c06102c061001052518112418110004381a0c381a0c00035111195011190001500d19500d19000152161352161380001f0f071f0f07000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020100f20100f01105b1c115a1c11000f570407560407010e20060e20060e000d52151c52151c000c580216580216000b21150a20150a000a20031b20031b000921051c20051c0108381c16381c1600072e1c142e1c140006530519520519010052191c52191c8000521a0d521a0d80005b18065a1806010520140620140600042b12062a120600035312015212018000221c03221c0300022108052008050001230115220115000e26041b26041b010d5b0e1d5a0e1d010a5b101d5a101d010a5b101b5a101b010a59130958130900102e0f1c2e0f1c010b2e1e022e1e02010f500e04500e04000938011a38011a000c510111500111000951010d50010d0009241403241403010725110524110501072514052414050007000000000000000055110354110300082508062408060107230404220404010550141650141600045114195014190004561d1d561d1d01025b1b1c5a1b1c00035a1c1b5a1c1b0003531a0d521a0d010052140152140180005212075212078000520508520508010053050252050280005b1d1c5a1d1c000353041e52041e8000541c1d541c1d00015112145012140000500413500413000050050a50050a01000000000000000000000000000000000051150e50150e0000250b12240b12011025140f24140f010f250f07240f07010e520b17520b17010d2c15192c1519000c530101520101800be3011ee0011e010a241b14241b140009521b0c521b0c0008510511500511000750050d50050d0007510311500311000750030d50030d00072416082416080106251a06241a06010538050838050800042f1b182e1b1801032405172405170002530805520805010053090552090501005307055207050100521804521804800052180a52180a8000521912521912800052161b52161b000024101a24101a0001000000000000000026160326160301102603182603180110271016261016011027161126161101102712112612110110500512500512000f510b0e500b0e000f531809521809010e531609521609010e591718581718000d5a0d195a0d19000c00000000000000002c05162c0516010b00000000000000002d07172c0717010b520d05520d05010a590d08580d080009590d09580d09000927040f26040f0008260607260607000726070626070600074b06064b060600062717082617080005271e11261e11000452161a52161a80005207195207198000501107501107010351120c50120c000350180e50180e000250160e50160e00022706052606050001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500111500111001051010d50010d00105112185012180010500e18500e180010511b0f501b0f0010510e11500e110010501211501211001050120d50120d0010500e0d500e0d0010281713281713010f280e04280e04000e290a1d280a1d000d2f1c182e1c18000c220e1a220e1a010b290511280511000a5a06035a060301092d13062c13060008531c09521c090007521a07521a070006591c03581c0300055a1d075a1d070004581805581805000329191c28191c0102530f1d520f1d8000530f02520f028000291909281909000100000000000000000000000000000000000000000000000000000000000000005110185010180010511014501014001051030950030900105107095007090010511409501409001051100950100900100000000000000000200c1c200c1c010f51010d50010d000e510111500111000e251004241004000d2a07162a0716010c211c16201c16000a52190352190301092a060f2a060f00082b180d2a180d010b5b1e1e5a1e1e00075c1d1d5c1d1d01002a14172a141700062418152418150005c41e09c41e090004240807240807000320011e20011e0002521619521619010052151352151380005211025211028000520401520401ff002a02052a02050001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b1d095a1d09000f580b03580b03000e3d0c0f3d0c0f000d240c10240c10000c220d0f220d0f000b200c0e200c0e000a25091a24091a00092d1a0f2c1a0f01085c060a5c060a01005c05155c05150100530c1d520c1d01072d1d022c1d020006590200580200000521080520080500042d16102c16100003380a18380a180002521812521812800053150c52150c8000530503520503010052061c52061c80002d0a0f2c0a0f00010000000000000000000000000000000000000000000000000000000000000000cd1e01cc1e01ff0ff0090ff0090f00109e0e079c0e07010ec71719c41719010dc51716c41716000cc71115c41115000bc70902c40902000ac60803c408030009c50701c407010008c50c19c40c1901079f17069c170600069d19049c190400059d1a129c1a1200049d1b1e9c1b1e01029f1e1b9c1e1b01029c1c1d9c1c1d01029e1d1c9c1d1c01029c1e1c9c1e1c01029c1c1e9c1c1e01029f1d1d9c1d1d01029c1d1e9c1d1e01029e1e1d9c1e1d01029d1e1e9c1e1e01029d0e0f9c0e0f01029c12139c12130002c71416c414160102c71315c4131500032e011e2e011e0001000000000000000000000000000000000000000000000000540114540114000f57080f56080f010e250506240506000d250505240505000c5b0e0b5a0e0b010b2c011e2c011e000a2f161f2e161f000927061926061900082409052409050007200c02200c02000652170852170800052014062014060004241b08241b080003521b19521b190002521119521119800050090d50090d00005d17165c17160100151b14151b140100141a16141a160100510f11500f11000051160d50160d00005c16155c1615ff00141e14141e1401105306035206038000530f08520f0880005219045219040100521604521604010052071b52071b800050041050041000010000000000000000ff0a07fc0a07ff00521109521109000ecb1710c81710000de10e06e00e06000cc2060bc0060b010ba41b0aa41b0a000ae21b1ce01b1c0009881e15881e15ff00890208880208ff00880214880214ff00cb190cc8190c000820061c20061c0007ca1806c818060105c80c18c80c1801035311185211180010cb0b15c80b150003280718280718000fca0f18c80f180103c80616c806160003cb0a13c80a13000451130e50130e0002510c12500c12000251091250091200022c0f162c0f16000653081a52081a8000521612521612010052180a52180a01005218085218080100520809520809000051050e50050e0001510510500510000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c90715c8071501102b0f132a0f13000f5a19095a1909010e57060b56060b010d2e09122e0912000c2d131e2c131e010b511419501419000a2e130b2e130b00092e140a2e140a00082e14092e140900072e12092e12090006530d19520d190105290f18280f1801042e091b2e091b00035208175208178000530f1b520f1b0180530f15520f1580005317145217140100501d0d501d0d0002511d11501d110002500211500211000250020d50020d0002e11002e010020001e20f02e00f02000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020031a20031a0010210419200419000f210318200318000e210219200219000d260f09260f09000c521a18521a18000b8a0f128a0f12010a2613042613040009e01d19e01d190008521319521319000755141854141800063d1b013d1b010005e00308e003080004530c19520c190003260a0f260a0f000253191b52191b80005a0c035a0c0300010000000000000000000000000000000000000000000000005b0a0c5a0a0c01005b0d0a5a0d0a01005a0d085a0d0801005715095615090103500410500410010450020250020201045904165804160007511c02501c020104501c1d501c1d010451161b50161b0104e2021de0021d01085904145804140007590714580714000758041258041200075805135805130007b30e17b00e17000650140d50140d000451120d50120d0004530b06520b060105530906520906010550111d50111d0000510d1d500d1d0000500c13500c1301045112125012120004511214501214000457130a56130a010355110b54110b000052110852110800025e13075e13070001";
 
  function rleDecode(data) {
    var buf = [];
    for (var i=0; i<data.length; i++) {
      var c = data.charCodeAt(i);
      if (c >= 128) {
        var code = c & 7;
        var n = (c>>3) & 15;
        if (n == 0)
          n = data.charCodeAt(++i);
        if (n == 0) {
          n = 1;
          code = data.charCodeAt(++i);
        }
        for (var j=0; j<n; j++)
          buf.push(code);
      } else {
        buf.push(c);
      }
    }
    return buf;
  }

  function stringToBytes(s) {
    var buf = [];
    for (var i=0; i<s.length; i++)
      buf.push(s.charCodeAt(i));
    return buf;
  }

  function lzwDecode(data) {
    var buf = [];
    var dict = [];
    for (var i=0; i<256; i++) 
      dict[i] = [i];
    for (var i=0; i<data.length; i++) {
      var s = dict[data[i]];
      s.forEach( function(e) { buf.push(e) });
      if (i+1 < data.length) {
        var next = dict[data[i+1]];
        dict.push(s.concat(next ? next[0] : s[0]));
      }
    }
    return buf;
  }

  function unpackBits(data, n) {    
    var buf = [];
    for (var i=0; i<data.length; i++) {
      var b = data[i];
      for (var j=7; j>=0; j--)
        buf.push((b >> j) & 1);
    }
    var res = [];
    for (var i=0; i<buf.length-n; i) {
      var v = 0;
      for (var j=0; j<n; j++, i++)
        v = (v << 1) | buf[i];
      res.push(v);
    }
    return res;
  }

  function hexDecode(data) {
    return data.match(/[0-9a-fA-F]{2}/g).map(function(e){
      return parseInt(e, 16);
    });
  }

  return {
    tiles: tiles,
    worldMap: lzwDecode(unpackBits(stringToBytes(atob(lzwMapData)), 13)),
    font: hexDecode(font),
    townMaps: lzwDecode(unpackBits(stringToBytes(atob(lzwTownMaps)), 12)),
    townInhabitants: hexDecode(townInhabitants)
  };
}());

ultima4.main = (function() {

  function getTileAt(x, y, town) {
    var tile = getInhabitantTileAt(x, y, town);
    if (tile)
      return tile;
    else if (openDoor && openDoor.x==x && openDoor.y==y)
      return tileType.stoneFloor;
    else
      return typeof town == "undefined" || town == null ? 
      getMapTileAt(x, y) : 
      getTownTileAt(x, y, town);      
  }

  function getMapTileAt(x, y) {
    return worldMap[y*256 + x];
  }

  function getTownTileAt(x, y, town) {
    return (x>=0 && x<32 && y>=0 && y<32) ?
      townMaps[town*1024 + y*32 + x] : tileType.grass;
  }
  
  function getInhabitantTileAt(x, y, town) {
    var h = getInhabitantAt(x, y, town);
    if (h) 
      return (h.tile>=0x20 && h.tile<=0x2F) || (h.tile>=0x50 && h.tile<=0x5F) ?
      h.tile ^ randomIntBetween(0, 1) : h.tile;
  }

  function getInhabitantAt(x, y, town) {
    if (town!=null && town>=0 && town<=16) 
      return townInhabitants[town].filter(function(e) {
        return e.pos.x==x && e.pos.y==y;
      })[0];
  }

  function drawChar(g, c, fgColor, bgColor, x, y) {
    if(c>=0 && c<=127) {
      for (var row=0; row<8; row++) {
        var b =  ultima4.gameData.font[c*8 + row];
        for (var i=7; i>=0; i--) {
          g.fillStyle = (b & (1<<i)) ? fgColor : bgColor;
          g.fillRect(x+8*2-(i+1)*2, y+row*2, 2, 2);
        }        
      }
    }
  }

  function drawText(g, s, fgColor, bgColor, x, y) {
    for (var i=0; i<s.length; i++) 
      drawChar(g, s.charCodeAt(i), fgColor, bgColor, x+i*8*2, y);
  }

  function drawCharLine(g, c, fgColor, bgColor, x, y, dx, dy, n) {
    for (var i=0; i<n; i++, x+=dx, y+=dy) 
      drawChar(g, c, fgColor, bgColor, x, y);
  }

  function drawTile(g, tile, x, y, frame) {
    if (typeof frame == "undefined")
      frame = 0;
    frame = tilesAnimated.indexOf(tile) == -1 ? 0 : frame % 16;
    g.drawImage(tiles, (tile%16)*16, Math.floor(tile/16)*16, 16, 16-frame, x, y+frame*2, 32, 32-frame*2);
    g.drawImage(tiles, (tile%16)*16, Math.floor(tile/16)*16+16-frame, 16, frame, x, y, 32, frame*2);
  }

  function drawViewport(g, mapX, mapY, town, frame) {
    var ox = 16 + 5*32;
    var oy = 16 + 5*32;
    for (var y=-5; y<=5; y++) {
      for (var x=-5; x<=5; x++) {
        var tile = !isTileInLineOfSight(x, y, town) ? tileType.empty : getTileAt(mapX+x,mapY+y,town);
        drawTile(g, x==0 && y==0 ? 31 : tile, ox + x*32, oy + y*32, frame);
      }
    }

    function isTileInLineOfSight(x, y, town) {
      var blockingTiles = numberOfSightBlockersOnLine(0, 0, x, y, town);
      if (blocksView(getTileAt(mapX+x,mapY+y,town)) && blockingTiles <= 1) {
        return true;
      } else {
        return blockingTiles == 0;
      }
    }

    function blocksView(tile) {
      return [tileType.mountain, tileType.forest, tileType.wall, tileType.wallSecretDoor].indexOf(tile) != -1;
    }

    function numberOfSightBlockersOnLine(x0, y0, x1, y1, town) {
      var origX1 = x1;
      var origY1 = y1;
      var steep = Math.abs(y1-y0) > Math.abs(x1-x0);
      if (steep) {
        var tmp = x0;
        x0 = y0;
        y0 = tmp;
        tmp = x1;
        x1 = y1;
        y1 = tmp;
      }

      if (x0 > x1) {
        var tmp = x0;
        x0 = x1;
        x1 = tmp;
        tmp = y0;
        y0 = y1;
        y1 = tmp;
      }

      var deltaX = x1 - x0;
      var deltaY = Math.abs(y1 - y0);
      var error = 0;
      var deltaError = deltaY/deltaX;
      var ystep = (y0 < y1) ? 1 : -1;
      var y = y0;
      var blockingTiles = 0;
      for (var x=x0; x<=x1; x++) {
        var tile = steep ? getTileAt(mapX+y,mapY+x,town) : getTileAt(mapX+x,mapY+y,town);
        if (!(y == 0 && x == 0) && blocksView(tile)) {
          blockingTiles += 1;
        }
        error = error + deltaError;
        if (error >= 0.5) {
          y += ystep;
          error -= 1.0;
        }
      }
      return blockingTiles;
    }
  }

  function drawScreenFrames(g) {
    frameCharLines.forEach(function(l) {
      drawCharLine(g, l[0], palette[14], palette[l[1]], l[2], l[3], l[4], l[5], l[6]); 
    });
  }

  function update() {
    var time = new Date().getTime();
    var wasWork = false;
    if (key == keys.F1)
      isPause = !isPause;
    if (!isPause) {     
      frame++;
      if(frame > frameLastCommand + 32*4)
        key = keys.Space;
      if(key) {
        window.console.log("update(): frame: "+ frame + ", key: "+ key);
        var command = activeCommand ? activeCommand : commands[key];
        if (command) {
          if(command(activeCommand ? key : null)) {
            round++;
            frameLastCommand = frame;
            activeCommand = null;   // Command ready, no input neede
            console.writePrompt();
            if(state.town != null)
              moveInhabitants(state.town);
          } else  {
            activeCommand = command;  // Input needed
          }
        } else {
          if (key != keys.F1) {
            console.write("WHAT?\n\n");
            console.writePrompt();
          }
        }
        wasWork = true;
      } else
        console.drawCursor(canvas.getContext("2d"));      
      if (openDoor && round>openDoor.openRound+4)
        openDoor = null;
      repaint();
    }
    key = null;
    time = new Date().getTime() - time;
    if (wasWork)
      window.console.log("frame time: "+ time +" ms");
    setTimeout(update, Math.max(50, frameTimeMs - time));
  }

  function repaint() {
    var g = canvas.getContext("2d");
    if (hints.clearScreen) {
      g.fillStyle = '#000';
      g.fillRect(0, 0, canvas.width, canvas.height);
      hints.clearScreen = false;
    }
    if (hints.redrawScreenFrames) {
      drawScreenFrames(g);
      hints.redrawScreenFrames = false;
    }
    drawViewport(g, state.pos.x, state.pos.y, state.town, frame);
    if (hints.drawInfo) {
      drawText(g, "1-TSU      125G", palette[1], palette[0], 24*16, 1*16);
      drawText(g, "2-MKA      125G", palette[1], palette[0], 24*16, 2*16);
      drawText(g, "F:0200   G:0200", palette[1], palette[0], 24*16, 10*16);
      drawText(g, "WIND SOUTH", palette[1], palette[0], 7*16, 23*16); 
      hints.drawInfo = false;
    }
    if (hints.drawConsole) {
      console.draw(g);
      hints.drawConsole = false;
    }
  }

  function Pos(x, y) {
    this.x = x;
    this.y = y;
    
    function mutateByDir(dir) {
      var m = dirPosMutations[dir];
      return m ? new Pos(this.x+m.x, this.y+m.y) : this.clone();
    }

    function clone() {
      return new Pos(this.x, this.y);
    }

    function equals(p) {
      return p && this.x==p.x && this.y==p.y;
    }

    return {
      x: x,
      y: y,
      mutateByDir: mutateByDir,
      clone: clone,
      equals: equals
    }
  }

  function moveCommand(dir) {
    return function() {
      var s = dirKeyNames[dir];
      var newPos = state.pos.mutateByDir(dir);
      var tile = getTileAt(newPos.x, newPos.y, state.town);
      if (canWalkOn(tile)) 
        if (canMoveTo(tile)) {
          state.pos = newPos;
        } else {
          s += "\nSLOW PROGRESS!";
        }
      else 
        s += "\nBLOCKED!";        
      if (state.town!=null && (state.pos.x<0 || state.pos.x>31 || state.pos.y<0 || state.pos.y>31)) {
        state.pos = state.worldPos;
        state.town = null;
        s += "\nLEAVING...";
      } 
      console.write(s+"\n\n");
      return true;
    };

    function canMoveTo(tile) {
      var difficulty = terrainDifficulty[tile];
      if (difficulty) {
        return randomIntBetween(0, difficulty) > 0;
      } else {
        return true;
      }
    }
  }

  function canWalkOn(tile) {
    return tilesCanWalkOn.indexOf(tile) != -1;
  }


  function randomIntBetween(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  function padStringCenter(s, len) {
    if (typeof len == "undefined")
      len = 15;
    if(s.length < len)
      for(var i=(len - s.length)/2; i>0; i--)
        s = " " + s;
    return s;
  }

  function isDirKey(key) {
    return [keys.left, keys.right, keys.up, keys.down].indexOf(key) != -1;
  }

  function getDirKeyName(key) {
    return dirKeyNames[key];
  }

  function initInhabitants(town) {
    townInhabitants[town].forEach(function(e) {
      e.pos = e.iniPos.clone();
    });
  }

  function moveInhabitants(town) {
    townInhabitants[town].filter(function(e) {
      return e.type == 1 && randomIntBetween(0, 1) == 0;
    }).forEach(function(e) {
      var pos = e.pos.mutateByDir(randomIntBetween(0, 3));
      if(!pos.equals(state.pos) && canWalkOn(getTileAt(pos.x, pos.y, town))) 
        e.pos = pos;
    });
  }

  function commandEnter() {
    var s = "Enter ";    
    if(state.town == null) {
      var loc = getLocation(state.pos.x, state.pos.y);
      var type = getTileAt(state.pos.x, state.pos.y, state.town);
      if(loc) {
        switch (type) {
        case tileType.shrine:
          s += "the\nshrine of\n"+ loc.name;
          s += "\n\nTHOU DOST NOT\nBEAR THE RUNE\nOF ENTRY! A\nSTRANGE FORCE\nKEEPS YOU OUT!\n"
          break;
        case tileType.dungeon:
          s += "dungeon!\n\n" + padStringCenter(loc.name);
          break;
        case tileType.village:          
        case tileType.town:
        case tileType.castle:
        case tileType.LBCastleCenter:
          state.town = loc.id;
          state.worldPos = state.pos.clone();
          initInhabitants(state.town);
          state.pos = locationTypes[type].entryPos.clone();
          s += locationTypes[type].name + "!\n\n" + padStringCenter(loc.name);
          break;
        }
      } else
        s += "WHAT?";
    } else
      s += "WHAT?";
    console.write(s + "\n\n");
    return true;
  }
  
  function commandOpen(key) {
    if (key == null) {
      console.write("Open-");
      openDoor = null;
      return false;
    } else {
      var s, pos=null;
      if (isDirKey(key)) {
        s = getDirKeyName(key);
        pos = state.pos.mutateByDir(key);
      } else {
        s = String.fromCharCode(key);
      }        
      console.write(s+"\n");
      var tile = pos ? getTownTileAt(pos.x, pos.y, state.town) : null;
      switch (tile) {
      case tileType.doorUnlocked:
        console.write("OPENED!\n\n");
        openDoor = { x: pos.x, y: pos.y, openRound: round };
        break;
      case tileType.doorLocked:
        console.write("CAN'T!\n\n");
        break;
      default:
        console.write("NOT HERE!\n\n");
      }
      return true;
    }
  }

  function commandPass() {
    console.write("Pass\n\n");
    return true;
  }

  function commandTalk(key) {
    if (key == null) {
      console.write("Talk-");
      return false;
    } else {
      if (isDirKey(key)) {
        console.write(getDirKeyName(key));
        console.write("\nFUNNY, NO\nRESPONSE!\n\n");
      } else {
        console.write(String.fromCharCode(key));
        console.write("\nPass\n\n");
      }
      return true;
    }
  }

  function commandVolume() {
    console.write("Volume OFF\n\n");
    return true;
  }

  function keyDown(e) {
    key = e.keyCode;
  }

  function createCanvas() {
    var canvas = document.createElement("canvas");
    canvas.width = 320*2;
    canvas.height = 200*2;
    return canvas;
  }

  function createConsole() {
    var height = 12;
    var width = 15;
    var lines = [""];
    var promptCode = 30;
    var cursorCode = 124;

    function write(str) {
      str.split("\n").forEach(function(s, i) {
        if (i > 0) {
          if (lines.length == height) 
            lines.shift();
          lines.push("");
        }
        lines[lines.length-1] += s;
      });
      hints.drawConsole = true;
    }

    function writePrompt() {
      write(String.fromCharCode(promptCode));
    }

    function drawCursor(g) {
      drawChar(g, cursorCode+3-(frame%4), palette[1], palette[0], (24+lines[lines.length-1].length)*16, (11+lines.length)*16);
    }

    function draw(g) {
      g.fillStyle = '#000';
      g.fillRect(24*16, 12*16, width*16, height*16);
      lines.forEach(function(s, i) {
        if(s.charCodeAt(0) == promptCode) {
          drawChar(g, promptCode, palette[14], palette[0], 24*16, (12+i)*16);
          drawText(g, s.substr(1), palette[1], palette[0], 25*16, (12+i)*16);
        } else
          drawText(g, s, palette[1], palette[0], 24*16, (12+i)*16);
      });
      drawCursor(g);
    }

    return {
      write: write,
      writePrompt: writePrompt,
      draw: draw,
      drawCursor: drawCursor
    };
  }

  function createTiles() {
    var tiles = new Image();
    tiles.src = ultima4.gameData.tiles;
    tiles.onload = onFinishedLoading;
    return tiles;
  }

  function onFinishedLoading() {
    console.write("Welcome to\n");
    console.write("Ultima IV\n\n");
    console.writePrompt();
    repaint();
  }

  function getLocation(x, y) {
    var hit = locations.filter(function(p){ return p.x==x && p.y==y });
    return hit ? hit[0] : null;
  }

  var keys = {
    Space: 32,
    up: 38,
    left: 37,
    down: 40,
    right: 39,
    F1: 112, 
    E: "E".charCodeAt(0),
    O: "O".charCodeAt(0),
    T: "T".charCodeAt(0),
    V: "V".charCodeAt(0),
    Z: "Z".charCodeAt(0)
  };

  var tileType = {
    deepOcean: 0,
    ocean: 1,
    river: 2,
    swamp: 3,
    grass: 4,
    bushes: 5,
    forest: 6,
    hill: 7,
    mountain: 8,
    dungeon: 9,
    town: 10,
    castle: 11,
    village: 12,
    LBCastleLeft: 13,
    LBCastleCenter: 14,
    LBCastleRight: 15,
    tileFloor: 0x16,
    stoneBridge: 0x17,
    woodenBridgeTop: 0x19,
    woodenBridgeBottom: 0x1a,
    ladderUp: 0x1b,
    ladderDown: 0x1c,
    ruins: 0x1d,
    shrine: 0x1e,
    doorLocked: 0x3a,
    doorUnlocked: 0x3b,
    stoneFloor: 0x3e,
    woodenFloor: 0x3f,
    wallSecretDoor: 0x49,
    empty: 69,
    wall: 0x7f
  };

  var terrainDifficulty = (function() {
    var a = {};
    a[tileType.forest] = 2;
    a[tileType.hill] = 2;
    a[tileType.swamp] = 2;
    a[tileType.bushes] = 10;

    return a;
  }());

  var tilesCanWalkOn = [tileType.swamp, tileType.grass, tileType.bushes, tileType.forest, tileType.hill, tileType.dungeon, tileType.town, tileType.castle, tileType.village, tileType.LBCastleCenter, tileType.stoneFloor, tileType.woodenFloor, tileType.stoneBridge, tileType.woodenBridgeTop, tileType.woodenBridgeBottom, tileType.ruins, tileType.shrine, tileType.wallSecretDoor, tileType.tileFloor, tileType.ladderUp, tileType.ladderDown];
  var tilesAnimated = [tileType.deepOcean, tileType.ocean, tileType.river];

  var state = {
    pos: new Pos(86,108),
    town: null,
    food: 10000,
    gold: 200,
    readInput: null
  };

  var palette = ["#000000", "#FDFEFC", "#BE1A24", "#30E6C6", "#B41AE2", "#1FD21E", "#211BAE", "#DFF60A", "#B84104", "#6A3304", "#FE4A57", "#424540", "#70746F", "#59FE59", "#5F53FE", "#A4A7A2"];

  var console = createConsole();
  var worldMap = ultima4.gameData.worldMap;
  var townMaps = ultima4.gameData.townMaps;
  var townInhabitants = (function() {
    var data = ultima4.gameData.townInhabitants;
    var towns = new Array();
    for (var j=0; j<=16; j++) {
      var a = new Array();
      for(var i=0; i<32; i++) {
        var p = j*256 + i*8;
        var tile = data[p];
        if(tile != 0) 
          a.push({ tile: tile, 
                   pos: new Pos(data[p+1], data[p+2]),
                   iniTile: data[p+3],
                   iniPos: new Pos(data[p+4], data[p+5]),
                   type: data[p+6],
                   talkType: data[p+7] 
                 });
      }
      towns[j] = a;
    }
    return towns;
  }());

  var tiles = createTiles();
  var canvas = createCanvas();
  var commands = (function() {
    var map = {};
    map[keys.up] = moveCommand(0);
    map[keys.right] = moveCommand(1);
    map[keys.down] = moveCommand(2);
    map[keys.left] = moveCommand(3);
    map[keys.Space] = commandPass;
    map[keys.E] = commandEnter;
    map[keys.O] = commandOpen;
    map[keys.T] = commandTalk;
    map[keys.V] = commandVolume;
    return map;
  }());
  var frame = 0;
  var frameLastCommand = 0;
  var frameTimeMs = 200;
  var round = 0;
  var key = null;
  var activeCommand = null;
  var openDoor = null;
  var isPause = false;
  
  var dirKeyNames = (function() {
    var m = {};
    m[0] = m[keys.up] = "North";
    m[1] = m[keys.right] = "East";
    m[2] = m[keys.down] = "South";
    m[3] = m[keys.left] = "West";
    return m;
  }());

  var dirPosMutations = (function() {
    var m = {};
    m[0] = m[keys.up] = { x: 0, y: -1 };
    m[1] = m[keys.right] = { x: +1, y: 0};
    m[2] = m[keys.down] = { x: 0, y: +1 };
    m[3] = m[keys.left] = { x: -1, y: 0 };
    return m;
  }());

  var locationTypes = (function() {
    var m = {};
    m[tileType.village] = { entryPos: new Pos(1, 15), name: "village" };
    m[tileType.town] = { entryPos: new Pos(1, 15), name: "towne" };
    m[tileType.castle] =  m[tileType.LBCastleCenter] = { entryPos: new Pos(15, 30), name: "castle" };
    return m;
  }());

  var locations = [
    { id: 0, x: 86, y: 107, name: "BRITANNIA" },
    { id: 1, x: 218, y: 107, name: "THE LYCAEUM" },
    { id: 2, x: 28, y: 50, name: "EMPATH ABBEY" },
    { id: 3, x: 146, y: 241, name: "SERPANTS HOLD" },
    { id: 4, x: 232, y: 135, name: "MOONGLOW" },
    { id: 5, x: 82, y: 106, name: "BRITAIN" },
    { id: 6, x: 36, y: 222, name: "JHELOM" },
    { id: 7, x: 58, y: 43, name: "YEW" },
    { id: 8, x: 159, y: 20, name: "MINOC" },
    { id: 9, x: 106, y: 184, name: "TRINSIC" },
    { id: 10, x: 22, y: 128, name: "SKARA BRAE" },
    { id: 11, x: 187, y: 169, name: "MAGINCIA" },
    { id: 12, x: 98, y: 145, name: "PAWS" },
    { id: 13, x: 136, y: 158, name: "BUCCANEERS DEN" },
    { id: 14, x: 201, y: 59, name: "VESPER" },
    { id: 15, x: 136, y: 90, name: "COVE" },
    { id: 16, x: 240, y: 73, name: "DECEIT" },
    { id: 17, x: 91, y: 67, name: "DESPISE" },
    { id: 18, x: 72, y: 168, name: "DASTERD" },
    { id: 19, x: 126, y: 20, name: "WRONG" },
    { id: 20, x: 156, y: 27, name: "COVETOUS" },
    { id: 21, x: 58, y: 102, name: "SHAME" },
    { id: 22, x: 239, y: 240, name: "HYLOTHE" },
    { id: 23, x: 233, y: 233, name: "THE GREAT\n\tSTYGIAN ABYSS!" },
    { id: 24, x: 233, y: 66, name: "HONESTY" },
    { id: 25, x: 128, y: 92, name: "COMPASSION" },
    { id: 26, x: 36, y: 229, name: "VALOR" },
    { id: 27, x: 73, y: 11, name: "JUSTICE" },
    { id: 28, x: 205, y: 45, name: "SACRIFICE" },
    { id: 29, x: 81, y: 207, name: "HONOR" },
    { id: 30, x: 231, y: 216, name: "SPIRITUALITY" },
    { id: 31, x: 231, y: 216, name: "HUMILITY" } ];

  var frameCharLines = [
    [16, 0, 0, 0, 0, 0, 1],
    [4, 1, 16, 0, 16, 0, 9],
    [30, 0, 10*16, 0, 0, 0, 1],
    [28, 0, 13*16, 0, 0, 0, 1],
    [4, 1, 14*16, 0, 16, 0, 9],
    [0, 0, 23*16, 0, 0, 0, 1],
    [4, 1, 24*16, 0, 16, 0, 15],
    [18, 0, 39*16, 0, 0, 0, 1],
    [10, 1, 0, 16, 0, 16, 22],
    [20, 0, 0, 23*16, 0, 0, 1],
    [2, 1, 16, 23*16, 16, 0, 5],
    [30, 0, 6*16, 23*16, 0, 0, 1],
    [28, 0, 17*16, 23*16, 0, 0, 1],
    [2, 1, 18*16, 23*16, 16, 0, 5],
    [12, 1, 23*16, 16, 0, 16, 8],
    [8, 1, 23*16, 9*16, 0, 0, 1],
    [12, 1, 23*16, 10*16, 0, 0, 1],
    [8, 1, 23*16, 11*16, 0, 0, 1],
    [12, 1, 23*16, 12*16, 0, 16, 11],
    [10, 1, 23*16, 23*16, 0, 0, 1],
    [8, 1, 39*16, 16, 0, 16, 8],
    [0, 1, 39*16, 9*16, 0, 0, 1],
    [8, 1, 39*16, 10*16, 0, 0, 1],
    [6, 1, 24*16, 9*16, 16, 0, 15],
    [6, 1, 24*16, 11*16, 16, 0, 15],
    [4, 1, 39*16, 11*16, 0, 0, 1]];

  var hints = {
    redrawScreenFrames: true,
    clearScreen: true,
    drawConsole: true,
    drawInfo: true
  };

  document.write("<body>");
  document.onkeydown = keyDown;
  document.body.appendChild(canvas);
  update();

  return {
    state: state
  };
}());