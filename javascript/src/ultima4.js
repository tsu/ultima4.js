var ultima4 = {};

ultima4.gameData = (function() {
  var tiles = "data:image/png;base64,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";

  var rleMapData = "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CJKhgCSZBKWboYAesQIICAgeAZvEkcSxgD+RmpGAJqkCCAgICAgICAEICAiXCAgICAKpgCKhBQgICAgFm5mAHqmSCAgICAECA8ShvLGAP5ECAAKRgCehkggICAicCAgIlwgICAiSoYAimQSVCAgIlZOhgB2hkggICAgCAQIHvLG8qYA/kQIBApGAJ6mSCAgHBAgICAinCAgICJKhgCGZlK0Ek6GAHaECCAgICJIBApe0wayxgD+pgCmpAgiXpJcIlwiXCAgCoYAimZyRlAOxgByhAggICJKRAp+k0aypgECZgCqpAggHCAgHBAcICAgInwgICAKhgCLJBAO5gByZqpmSl6ShmJmsqYBumZIICAgICAcICAifCAgICJKZgCSBEoAb4QKfBZSZqJkFpKGAbpkCCAgICAifCAgHCJcICJKZgCbZk6GAHNkCnwWUmaiZlZypgGyZkggICAivCAgICAcICAKZgCe5s6GAHsmSnwUEmbCZlZSpgGyZAggICAi/CAgICAiSmYAnoaMICAgDqYAhuQKfBZSRsJmduYBqoQIICAgInx6fCAhGCAgCqYAloZsICAgIsYAkqQKflQSRsJmdwYBpmZIICAgICK8ICAhMCAiSoYAloQMFCAgIuYAmoZKXlQSZoJmd0YBokZIICAgICAgICAgICAhMTEwICAiSoYAjoZMFCAi5gCipAwedmaCZldmAZ5GSCAgICAgICAhGTEwITEwHTAgICAgCqYAioZOVCLmAKKmTpZGgkZXpgGYBkggICJkICAhMB0wITJ8ICAgIArmAIKGblZSxgCipA6WRoIESgGUBAggICKkICEyvmwcICJK5gB+xA50KBKmAKKmTnZGguZ2hA5mAZJEICAi5CAgIB6MICAcICAgCuYAfqZMICJWUsYAnoQIHnZmguZ2Rk6GAY5EICAjBCAgIAwgICAiXCAgICAK5gB6hkwgICAgFlJOpgCahApeVmai5lQSTqYAbuYBB8aMICAifCAgICAe5gB6ZkwihBKuZgCeZkpeVApGguZ0EA7GAF+GAP5EICAjBCAgICJsIpwgICJ+pgB6BE4AomZKfkpGQoQWhlQTBsLm4gRCAPZEICAi5CAgICAgIAwgIpwgICAifoYAfgROAJ6GSn5KxlZmd2ZjRkIEVgDuRAggICLEICAgICAgICKcICAgICJepgB/BBAiRBZOhgCihmpcCqZ2hlYEkBJ3BgDsBkggICKEICAgICAgICKcICAgICMGAH7kEHggICAYFA6GAKam6nAWxBYERnOmsnbmAO5GSCAgICAgICAgITEwHTK8ICAiSuYAhsQgICJ4Fk6GAKcECl5wF+QUEsazRvKW5gDuRkggICAgICEyXTExMpwgICJKxgCOxCAielQSTmYArsZKfBAL5lZSRrNnMncmAOZmSCAgICAhMTJdMpwgICAgCsYAlsQiWlZSTmYAtqZqXkgGiyZ204eQF6YA0oZIICAgICAdMB0xMTAdMTAgICAgHqYAnqaWUk6GAL6kCnwIBApeSAZ2ppZzZ9JmV4YAxoQIICAgICAhMTExMRkxMTAcICAiXqYAnyQSToYAxoZKXAgGSl5MEBbmt0YQQka3hgC6hkggICAgICEyXTExMB0xMCAgIB7GAKfGAM5mSBwKRkpeU0ZWx7J20vemALKECBwhMRggICJdMTEyfTAgICAK5gCrZgDaRopGSn5Lx7J0Clby1oZ2xgCqpAwdMTEwICAgITEwHTEyXCAgICJKxgCy5gDmhApmSn5rZleSdkpXEpaGtoYApqZOXTAgICAgICEyXTEwICAgICAiSsYAtoYA8uZqfmpECsZ3UlQKVF5XUlamUnZmAFKmAEKGjBwgICAgICAgICAgICAgICAgICAgIuYBvsaqhkqmtxJWqlczBlJWZgBORmpnwoaOSCAgICAgICAgICAgICAgICAgICAgHqYBy4ZqhtbydF5UCmbSBEYATAZJMkpnwoZORkggICAgICAgICAgICAgJCAgICAifoYBzyZIHAqm1tJWSBQsFoaS5kMGAFAECTEZMAqngwZIICAgICAiXCAgICJQICAgICAiXoYB0wQKXkqmdn7QFAp0E6bCpgBUBkkyykdjBAggICAgIrwgInAgICAgICAepgHWpmp+SoZKvrJ2c4YAgmbJMkgHguQcICAgICAcCnwgIlwgICAgICAipgHahlAKXBJeamaKn1NGAIbGSTEZMAgHgsZcICAgICJqvCAgICAiSoYB5obSfArGSl5yntLmAIZGakZpMkgHoqZ8ICAiSAQIIpwgIoqGAeqmcAay5AqyRn7SpgCIBkkzCkeixlwgIkpECCAiXCAiSuYB70ZzJnKmXrKmAIgECTEZMmqn46ZIICAgICJKxgH3RlIETpKmAIwGSTJKRgBXpkggICAgIAqGAgckEgRyAI5GakYAX6QIICAgICAKZgIWBIoAlqYAaqZChkggICJKZgIfJoKGgyYBPmaqZgIqpgBCpgFLJgIyZgGqpgP+A/4AS";

  var font = "ffffffffffffffffffffffffffffffff00ffffffffffffff00ffffffffffffffffffffffffffff00ffffffffffffff0000ffffffffffff0000ffffffffffff003f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3ffcfcfcfcfcfcfcfcfcfcfcfcfcfcfcfc3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3cffc3c3c3c3c3c3ffffddffffffffddff00030f1f3f3f7f7f00030f1f3f3f7f7f00c0f0f8fcfcfefe00c0f0f8fcfcfefe7f7f3f3f1f0f03007f7f3f3f1f0f0300fefefcfcf8f0c000fefefcfcf8f0c000183c7e181818181818181818187e3c18183c7e18187e3c180000387c7c38000000030f3f3f0f030000030f3f3f0f030000c0f0fcfcf0c00000c0f0fcfcf0c000000000000000000000181818180018180036366c00000000006cfe6c6cfe6c0000103c70381c78100000666c183666000070d8d876dcdc760018183000000000000c18303030180c0060301818183060000010387c381000000018187e1818000000000000181830000000007c000000000000000000181878cccc78fc30303000386c6c6c6c6c38000818381818183c00386c0c1830607c00386c0c380c6c38006c6c6c7c0c0c0c007c60780c0c6c38000c1830786c6c38007c0c0c1830303000386c6c386c6c3800386c6c3c18306000001818001818000000181800181808000c18306030180c0000007c007c0000006030180c18306000386c0c18001818ffffffffffffffff000e1e36363e3666007c36363c36367c001c36606060663c007c36363636367c007e30303c30307e003e30303c303060001c3660606e663c006666667e666666007e18181818187e003e06060666663c00666c7870786c66003030303030386e0042667e7e666666004666767e6e6662003c66666666663c007c66667c606070003c666666666c36007c66667c6c6666001c36603c06663c007e181818181818006666666666663c0066666666663c1800666666667e66420066663c183c6666006666663c181818007e060c7e30607e007c60606060607c001e0e1a386c6c38007c0c0c0c0c0c7c000010386c0000000038fefefefe38000000007e7e3c7e000000003c6c6c6c360030303c3636366c0000003c6660663c000c0c3c6c6c6c360000003c667e603e001c36307e3030600000003c663e067c00606060786c6c66000018001818183c000c000c0c6c6c38006060666c786c66003818181818183c00000042667e66660000006c766666660000003c6666663c0000007c667c60700000003e663c0c060000006c766060600000003c603c067c0030307c3030361c0000006c6c6c6c360000006666663c1800000066667e6642000000663c183c6600000066663e0c380000007e0c18307e003c66663c183c18007cfec6d6decc600078fcccd8c2fe7c000c66f6d6c6fe7c007cfe8636667e3c";

  var townMaps = "7f7f7f7d7f7f7f06060604040404040404040404040404047f7f7f7d7f7f7f047f3e3e3e3e3e7f7f7f0606040404040404040404040404067f3e3e3e3e3e7f047f3e3e3e3e3e7f1c3a060606040404040404040404040606493e3e3e3e3e7f047d3e3e1b3e3e7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f3e3e1b3e3e7d047f3e3e3e3e3e7f3e3e3e3e3e493e3e3e3e3c7f76607364717f3e3e3e3e3e7f047f3e3e3e3e3e7f3e7c7a7b3e7f3e3e3e3c3c7f3e3e3e3e3e3b3e3e3e3e3e7f047f7f7f7f3e3e7f3e3e3e3e3e7f3e3e3c3c3c7f3e3e3e3e3e7f7f497f7f7f7f040606067f3e3e3b3e3e3e3e3e7f3e3c3c3c3c7f3e3e3e3e3e7f3e3e7f060606040406067f3e3e7f7b3e3e7c7a7f3c3c3c3c3c7f3e0202023e7f3e3e7f060604040404067f3e3e7f3e3e3e3e3e7f7f7f7f7f7f7f02020102027f3e3e7f060404040404047f3e3e7f7b3e3e7c7a7f48484848487f01010001017f3e3e7f040404040404047f3e3e7f3e3e3e3e3e7f48330234487f01000000017f3e3e49040404040404047f3e3e7f7f7f7f7f7f7f33023d02347f7f7f7f7f7f7f3e3e7f040404040404047f3e3e7f02020202027d02020202027d02020202027f3e3e7f040404040404047f3e3e7f3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f497f7f040404040404047f3e3e3b3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3b3e3e7f040404040404047f3e3e7f3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f3e3e7f040404040404047f3e3e7f02020202027d3e3e3e3e3e7d02020202027f3e3e7f040404040404047f3e3e7f7f7f7f7f7f7f303e3e3e307f7f7f7f7f7f7f3e3e7f040404040404047f3e3e3b1616167f7f3e3e3e3e3e3e3e7f3e3e3e3e3b3e3e7f040404040404047f3e3e7f7f47477f7f3e303e3e3e303e7f7b3e3e7c7f3e3e7f040404040404047f3e3e7f474747477f3e3e3e3e3e3e3e7f3e3e3e3e7f3e3e7f040404040404067f3e3e7f474747477f3e303e3e3e303e7f7b3e3e7c7f3e3e7f060404040406067f3e3e7f474747477f3e3e3e3e3e3e3e7f3e3e3e3e7f3e3e7f060604040606067f3e3e7f161616167f3e303e3e3e303e7f7b3e3e7c7f3e3e7f060606047f7f7f7f3e3e7f726464717f3e3e3e3e3e3e3e7f3e3e3e3e7f3e3e7f7f7f7f047f3e3e3e3e3e7f3d16163d7f3e303e3e3e303e7f6764606b7f3e3e3e3e3e7f047f3e3e3e3e3e7f161616167f3e3e3e3e3e3e3e7f3e3e3e3e7f3e3e3e3e3e7f047d3e3e303e3e7f7f7f7f7f7f7f7f3e3e3e7f7f7f7f7f7f7f7f3e3e303e3e7d047f3e3e3e3e3e7f050504370505053e3e3e050505040505057f3e3e3e3e3e7f047f3e3e3e3e3e7f050437040405053e3e3e050504040437057f3e3e3e3e3e7f047f7f7f7d7f7f7f040404040404053e3e3e050404370404047f7f7f7d7f7f7f047f7f7f7f7f7f7f7f7f050404040404057f7f7f7f7f7f7f7f7f7f7f7f7f7e7e7e7f6b6861716071787f050504040405057f7a61716873606d6d68607a7f7e7e7e7f161616161616167f7f7f7f7f7f7f7f7f16161616161616161616167f7e7e7e7f7a607b167c6d7a7f05053e3e3e3e3e3b1616161616167c7a7a7a7a7a7a7a7e7f161616161616167f053e3e3e3e3e057f16161616161616161616167f7e7e7e7f7a647b167c717a7f3e3e3e3e3e05057f6e617264717560736e71787f7e7e7e7f161616161616167f3e3e3e7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7e7e7e7f7a687b167c757a7f3e3e3e7f716e617a616473677f3c3e3c3c3c3c7f0404047f161616161616167f3e3e3e7f3e3e3e3e3e3e3e3e493e3e3e3c3c3c7f0404047f7f7f7f3e7f7f7f7f3e3e3e7f3e3e7c7a7a7b3e3e7f3c3c3e3e3c3c7f0404040505057f3e3e3e3e7f3e3e3e7f3e3e7d3e3e7d3e3e7f7f7f7f7f7f7f7f0404040405057f3e3e3e3e7f3e3e3e7f3e3e3e3e3e3e3e3e7f3e3e3e3e3e3e7f0404040404057f3e3e3e3e3a3e3e3e7f3e3e3e3e3e3e3e3e7f6764606b64717f0404040404047f3e3e3e3e7f3e3e3e7f3e3e3e3e3e3e3e3e7f3e3e3e3e3e3e7f0404040404047f3e3e3e3e7f3e3e3e7f053e3e3e3e3e3e057f3e3e3e3e3e3e7f0404040404047f3e3e3e3e7f3e3e3e7f05053e3e3e3e05057f3e3e3e3e3e3e7f0404040404047f7f7f7f7f7f3e3e3e7f7f7f7f3e3e7f7f7f7f7f7f3e3e7f7f7f0404040404047f05053e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f040404040404047f053e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f040404040404047f3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f040404040404047f3e3e3e7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f3e3e3e7f040404040404047f3e3e3e02020202027f3e3e3e3e3e7f02020202023e3e3e7f040404040404057f3e3e3e02020202027f3e303e303e7f02020202023e3e3e7f050404040405057f3e3e3e3f3f3f3f3f3f3e3e3e3e3e3f3f3f3f3f3f3e3e3e7f050504040505057f3e3e3e3f3f3f3f3f3f3e3e3e3e3e3f3f3f3f3f3f3e3e3e7f050505047f7f7f7f3e3e3e3f3f3f3f3f3f3e3e3e3e3e3f3f3f3f3f3f3e3e3e7f7f7f7f047f3e3e3e3e3e3e02020202027f3e3e3e3e3e7f02020202023e3e3e3e3e3e7f047f3e3e3e3e3e3e02020202027f3e3e3e3e3e7f02020202023e3e3e3e3e3e7f047f3e3e303e3e7f7f7f7f7f7f7f3e3e3e3e3e7f7f7f7f7f7f7f3e3e303e3e7f047f3e3e3e3e3e7f0505050405053e3e3e3e3e0505040505057f3e3e3e3e3e7f047f3e3e3e3e3e7f0505040404053e3e3e3e3e0504040405057f3e3e3e3e3e7f047f7f7f7f7f7f7f0504040404043e3e3e3e3e0404040404057f7f7f7f7f7f7f047f7f7f7d7f7f7f050404040404040404040405370505040537050404040404047f3e3e3e3e3e7f050504040404040404370506060605050606060505043704047f3e3e3e3e3e7d050505040404040405050606060604040606060406060404047d3e3e303e3e7f7f7f7f7f7f7f7f7f7f050506060404040404040406060604047f3e3e3e3e3e7f7a7a717a7a6c7a7a7f050404040404040404040404060605047f3e3e3e3e3e7f3e3e3e3e3e3e3e3e7f040406060404040404060604040537047f7f7d7f3e3e7f3e3e7c7a7a7b3e3e3a040406060404040404060606040405040505057f3e3e7f3e3e7d3e3e7d3e3e7f050404040406060404040606040505040405057f3e3e7f3e3e3e3e3e3e3e3e7f060504040606060404040404050504040404057f3e3e493e3e3e3e3e3e3e3e7f0606050506060505050505050537040404040449497f7f3e3e3e3e3e3e3e3e7f7f7f7f7f7f7f7f7f7f7f7f7d7f7f7f040404047f3e3c7f053e3e3e3e3e3e057f3e3e3e7c7b3e3e3e7f3e3e3e3e3e7f040404047f3c3c7f05053e3e3e3e05057f3e7d3e3e3e3e7d3e7f3e3e3e3e3e7f040404047f7f7f7f7f7f7f3e3e7f7f7f7f3e3e3e3e3e3e3e3e3b3e3e3e3e3e7d040404047f05053e3e3e3e3e3e3e02017f3e3e3e3e3e3e3e3e7f3e3e3e3e3e7f040404047f053e3e3e3e3e3e3e3e02017f7a6764606b64717a7f3e3e3e3e3e7f040404047f3e3e3e3e3e3e3e3e3e02017f3e3e3e3e3e3e3e3e7f3e3e7f7f7f7f040404047f3e3e3e7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f3e3e7f040404040404047f3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f040404040404047f3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f040404020204047f3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f040402020202047f3e3e7f7f7f7f7f7f7f3e3e3e3e3e7f7f7f7f7f7f7f3e3e7f040202020202027f3e3e7f7f453d457f7f3e3e3e3e3e7f3e3e3e3e3e7f3e3e7f020202040402027f3e3e7f16161616167f3e3e3e3e3e7f3e3e3e3e3e3b3e3e7f020204040404027f3e3e3b16161616167f3e3e3e3e3e7f3e3e3e3e3e7f3e3e7f020404047f7f7d7f3e3e7f7f7f7f7f7f7f3e3e3e3e3e7f7f7f7f7f7f7f3e3e7f7d7f7f047f3e3e3e3e3e7f0202040404043e3e3e3e3e0404370402027f3e3e3e3e3e7f047f3e3e3e3e3e7f0202020237043e3e3e3e3e0404020202027f3e3e3e3e3e7f047d3e3e303e3e7d0202020202023e3e3e3e3e0202020202027d3e3e303e3e7d047f3e3e3e3e3e7f0502020202023e3e3e3e3e0202020202057f3e3e3e3e3e7f047f3e3e3e3e3e7f3705050202023e3e3e3e3e0202023705057f3e3e3e3e3e7f047f7f7f7d7f7f7f0505040404043e3e3e3e3e0404040404057f7f7f7d7f7f7f04047f7f7d7f7f050504040404040402020204040404040405057f7f7d7f7f04047f7f3e3e3e7f7f05050404040402010101020404040405057f7f3e3e3e7f7f047f3e3e3e3e3e7f05050504040201000000010204040505057f3e3e3e3e3e7f047d3e3e303e3e7f7f7f7f497f7f7f7f7f7f7f7f7f497f7f7f7f3e3e303e3e7d047f3e3e3e3e3e3e3e3e3e3e7f72646d7371687a7f3e3e3e3e3e3e3e3e3e3e7f047f7f3e3e3e3e3e3e3e3e3e7f3e3e3e3e3e3e3e7f3e3e3e3e3e3e3e3e3e7f7f04057f7f7f7f7f7f7f3e3e3e493e3e7c7a7b3e3e493e3e3e7f7f7f7f7f7f7f05040505057f3c3e3e3e3e3e027f3e3e7d3e7d3e3e7f023e3e3e3e3e3c7f050505040405057f3c3c3e3e3e02017f3e3e3e3e3e3e3e7f01023e3e3e3c3c7f050504040404057f3c3c3c3e0201007f053e3e3e3e3e057f0001023e3c3c3c7f050404040404047f7f7f7f7f7f7f7f7f7f7f3e3e3e7f7f7f7f7f7f7f7f7f7f7f040404040404047f7a60626063646c787a7f3e3e3e7f053e3e3e7f7d3e7c7a7f040404040404047f3e3e3e3e3e3e3e3e3e7f3e3e3e7f3e3e3e3e3b3e3e3e3e7f040404040404047f3e3f3f3f3f3f3f3f3e3b3e3e3e3b3e3e3e3e7f7d3e7c7a7f040404040404047f3e3f3f3f3f3f3f3f3e7f3e3e3e7f3e3e3e3e7f7f7f7f7f7f040404040404047f3e3f3f3f3f3f3f3f3e7f3e3e3e7f3e3e3e3e3e3e3e3e057f040404040404047f3e3f3f3f3f3f3f3f3e7f3e3e3e7f3e3e3e3e3e3e3e3e3e7f040404040404047f3e3f3f3f3f3f3f3f3e7f3e3e3e7f3e3e3e3e3e3e3e3e3e7f040404040404047f3e3f3f3f3f3f3f3f3e7f3e3e3e7f7a6764606b686d667a7f040404040404047f3e3e3e3e3e3e3e3e3e7f3e3e3e7f3e3e3e3e3e3e3e3e3e7f040404040404047f7f7f7f7f7f7f7f7f7f7f3e3e3e7f7f7f7f7f7f7f7f7f7f7f040404040404047f053e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f040404040404057f3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f050404040405057f3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f050504040505057f3e3e7f7f7f7f7f7f7f7f3e3e3e7f7f7f7f7f7f7f7f3e3e7f05050504057f7f7f3e3e7f3e3e3e3e7f3e3e3e3e3e3e3e7f3e3e3e3e7f3e3e7f7f7f05047f7f3e3e3e3e3b3e3e3e3e7f3e3e3e3e3e3e3e7f3e3e3e3e3b3e3e3e3e7f7f047f3e3e3e3e3e7f3e3e3e3e7f7f7f3e3e3e7f7f7f3e3e3e3e7f3e3e3e3e3e7f047d3e3e303e3e7f7f7f7f7f7f37043e3e3e04047f7f7f7f7f7f3e3e303e3e7d047f3e3e3e3e3e7f050505050404043e3e3e043704050505057f3e3e3e3e3e7f047f7f3e3e3e7f7f050505043704043e3e3e040404040505057f7f3e3e3e7f7f04047f7f7d7f7f05050504040404043e3e3e04040437040505057f7f7d7f7f040404040404040404040404040404057f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f04040405050505050505050505057f3e3e3e3e3e3e3e7f0202027f3e3c3c3c7f04040505050505050505050505057f7367647a686d6d7f3e3e3e3b3e3e3e3c7f04050505050404040404040405057f3e3e3e3e3e3e3e7f3e3e3e7f7b3e7c7a7f04050505040404040404040404057f3e3e3e3e3e3e3e7f3e3e3e7f7f7f7f7f7f04050504040404040404040404047f3e3e3e3e3e3e3e3b3e3e3e7f3e3e7c7a7f04050504040404043c04040404047f3e3e3e3e3e3e7d7f3e3e3e3b3e3e3e3e7f04050504040404040404040404047f3e3e3e7c7a7b057f0202027f7b3e7c7a7f04050504040404040404040404047f3e3e3e7f7f7f7f7f7f7f7f7f7f7f7f7f7f0405050404040404040404040404043e3e3e05050504040404050505050505040405050404040404020202040404043e3e3e05050404040404040405050505050405050404040402020102020404053e3e3e05040404047f7f7f7f7f7f7f7f050405050404040402014501020405053e3e3e05040404057f7a726066647a7f040405050404040402010101020505053e3e3e05040405057f3e3e3e3e3e3e7f04043e3e3e3e3e3e19191919193e3e3e3e3e3e05050505057f7a63646b687a7f04043e3e3e3e3e3e3f3f3f3f3f3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f04043e3e3e3e3e3e1a1a1a1a1a3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f040405050404040402010101020505053e3e3e3e3e3e3e3e3e3e7d3e7d3e7d7f040405050404040402014501020405053e3e3e05050505057f7f7f7f7f7f7f7f050405050404040402020102020404053e3e3e05050404040404040404050505050405050404040404020202040404043e3e3e05040404040404040404040505040405050504040404040404040404043e3e3e050404047f7f7f7f7f7f7f7f05050505050505040404040404040404043e3e3e050504047f3e3e3e3e3e3e7f0505057f7f7f7f7f7f7f7f7f7f0404043e3e3e3e050505057f7b3e3e3e3e7c7f0505047f6c60666862606b7f7f04043e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f0505047f3e3e3e3e3e3e3e7f7f043e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7c7f0505047f7a67647161727a7f7f3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f0505047f3e3e3e3e3e3e3e3e3e3e3e3e04040404040404047f6764606b64717f0505047f3e3e3e3e3e3e3e3e3e3e3e0404040404040404047f3e3e3e3e3e3e7f0505047f3e3e3e3e3e3e3e3e3e3e050505050505050505057f7f7f7f7f7f7f7f0505047f7f7f7f7f7f7f7f7f7f0505050505050505050505050505050505050505040404040404040404040405050404040404040404040505050505050505050404393939393939393939393939393939397f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f397f7f7f7f7f7f7f7f7f7f06060606067f3e3e3e3e3e3e3e7f3e3e7f7d3e3e7f397f3e3e3e3e3e3e3e3e7f06060606067f726f68716873727f7f3e3b3e3e3e7f397f7664606f6e6d71787f06050506067f3e3e3e3e3e3e3e3e7f3e7f3e7c7a7f397f3e3e3e3e3e3e3e3e303e3e3e3e067f3e7d3e7d3e7d3e3e7f3e7f7f7f7f7f397f3e3e3e3e3e3e3e3e3e3e3e3e3e057f3e3e3e3e3e3e3e3e7f3e7f3e7c7a7f397f3e3e3e3e3e3e3e3e303e3e3e3e047f656e6e637f3e3e3e7f3e3b3e3e3e7f397f7a60716c6e74717a7f043e3e3e047f3e3e3e3e7f3e3e3e7f3e7f7d3e3e7f397f3e3e3e3e3e3e3e3e7f043e3e3e047f7f7f7f7f7f3e3e3e7f3e7f7f7f7f7f397f7f7f7f7f7f7f7f7f7f043e3e3e0405053e3e3e3e3e3e3e3e3e3e3e3e3e7f3905040404040404040404043e3e3e0404053e3e3e3e3e3e3e3e3e3e3e3e3e7f3905050404040404040404053e3e3e0404053e3e3e3e3e3e3e3e3e3e3e3e3e7f3905050504040404040405053e3e3e0405053e3e3e7f61716873606d6d68607f3905050505040404040505053e3e3e0505053e3e3e7f3e3e3e3e3e3e3e3e3e7f3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f7a7a6c606d6e717a7a7f3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f7f7f7f7f7f7f7f7f7f7f3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e0437040404040402020239390505050404040404043e3e3e05050505040404040404040404020202020239390606050505040404043e3e3e05050504040404040404040202020202020239390606060605050404043e3e3e050504040404040404040202020202020205397f7f7f7f0606050504043e3e3e050404040404040404020202020202050505397f3e3e7f0606060505043e3e3e040404040404040437020202020404040505397f3e3e7f0606060605053e3e3e040404040404040402020202370404040405397f7f497f7f7f7f7f7f053e3e3e040404040404040419191919040404040404397f383e3e3e3e3e3e303e3e3e3e04040404040404041a1a1a1a040404040404397f7b3e3e3e3e3e3e3e3e3e3e3e040404040404040402020202040404040404397f383e3e3e3e3e3e303e3e3e3e040404040404040202020204040404040404397f7b3e3e3e3e3e7c7f05053704040404040404040202020204040404040404397f3e3e3e3e3e3e3e7f060505040404040404040202020205050404044b0404397f6764606b686d667f06060505040404040202020202020505040404040404397f3e3e3e3e3e3e3e7f06060605050402020202020202050505050404040404397f7f7f7f7f7f7f7f7f39393939393939393939393939393939393939393939397f7f7d7f7f040404040404040404040404040404040404040404047f7f7d7f7f7f3e3e3e7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f3e3e3e7f7d3e303e453e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e453e303e7d7f3e3e3e7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f3e3e3e7f7f7f7f457f3e3e3e3e3e3e3e7f3302020202347f7f3e3e3e3e3e3e7f7f457f7f05057f3e7f3e3e3e3e3e3e3e7f0202020202027f7a60716c6e74717a7f3e7f0404057f3e7f6764606b686d66303e3e3e3e3e3e303e3e3e3e3e3e3e3e7f3e7f0404047f3e7f3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f3e7f0404377f3e7f387d387d387d3e303e3e3e3e3e3e303e3e3e3e3e3e3e3e7f3e7f0404047f457f7f7f7f7f7f7f7f7f053e3e3e3e057f7664606f6e6d71787f3e7f0404047f3e3e3e7f060606060605053e3e3e3e057f7f3e3e3e3e3e3e7f7f3e7f0437047f3e3e3e7f060606050505043e3e3e3e057f7f7f7f7f7f7f7f7f7f3e7f0404047f3e3e3e7f060505050504043e3e3e3e040505050505060606067f3e7f0404047f3e303e7f050505040404043e3e3e3e040404040505050606067f3e7f043e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e0405050606067f3e7f043e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e0404050506067f3e7f043e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e0404050506067f3e7f0404047f3e303e7f0505050404040404040404043e3e3e7f7f7f7f7f7f7f3e7f0404047f3e3e3e7f0605050505050404040404043e3e3e7f3e3e3e3e3e7f3e7f0437047f3e3e3e7f0606060505050505050504043e3e3e7f7a6f74617a7f3e7f0404047f3e3e3e7f0606060606050505050505053e3e3e7f3e3e3e3e3e7f3e7f0404047f457f7f7f7f7f7f7f7f7f7f7f7f7f7f7f3e3e3e7f7b3e3e7c7a7f3e7f0404047f3e7f7b3e3e3a3e3e3e3e3e3e3e3e3e3b3e3e3e3e3e3e3e3e3e7f3e7f0437047f3e7f3e3e3e7f3e3e3e3e3e3e3e3e3e3b3e3e3e3e3e3e3e7c7a7f3e7f0404047f3e7f7a7b3e7f7f7f7f7f3e7f7f7f7f7f3e3e3e3e3e3e3e3e3e7f3e7f0404057f3e7f7f7f497f7a7b3e7f3e7f3e7c7a7f3e3e3e3e3e3e3e3e3e7f3e7f0405057f3e493c3e3e7f3e3e3e7f3e7f3e3e3e7f7a7367647a686d6d7a7f3e7f047f7f7f457f3c3c3e7f7b3e3e3b3e3a3e3e7c7f7f3e3e3e3e3e3e3e7f7f457f7f7f3e3e3e7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f3e3e3e7f7d3e303e453e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e453e303e7d7f3e3e3e7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f3e3e3e7f7f7f7d7f7f040404040404040404040404040404040404040404047f7f7d7f7f06060606060606060606060606060606060606060606060606060606060606060606060202020202020202020202020202020202020202020202020202060606060602020606060606060606060606060606060606060606060606060202060606020206060606060606060606060606060606060606060606060606060202060602060606040404060606067f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f060602060602060604040404040606067f3e3e303e3e3e7f697472736862647f060602060602060604040404040606067f3e3e3b3e3e3e7f3e3e3e3e3e3e3e7f060602060602060604040404040606067f3030303e3e3e7f3e3e7c7a7b3e3e7f060602060602060606040404060606067f3e3e303e3e3e7f3e3e7d3e7d3e3e7f060602060602060606060606060606067f3e3e3b3e3e3e7f3e3e3e3e3e3e3e7f060602060602060606060606060606067f3030303e3e3e7f3e303e3e3e303e7f060602060602060606060606060606047f3e3e3e3e3e3e3b3e3e3e3e3e3e3e7f060602060606060606060606060404047f3e3e3e3e3e3e7f3e303e3e3e303e7f060602060406060604040404040404047f7a6960686b7a7f3e3e3e3e3e3e3e7f060602063e3e3e3e3e3e3e3e3e3e04047f7f7f7f7f7f7f7f7f7f3e3e3e7f7f7f060602063e3e3e3e3e3e3e3e3e3e0404040404040404040404043e3e3e040406060202063e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e04040202020606040606060404043e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e04020202060606060606060604043e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e04020202060606060206060606043e3e3e0404040404040404040404043e3e3e04040202020606060206067f7f7f3e3e3e7f7f7f0404040404040404043e3e3e04040606020206060206067f3e3e3e3e3e3e3e7f0604040404047f7f7f303e307f7f7f06060206060206067f3e3e3e3e3e3e3e7f0606040404067f383e3e3e3e3e387f06060206060206067f3e3e3e3e3e3e3e7f0606060606067f7b3e3e3e3e3e7c7f06060206060206067f7a7a6371787a7a7f0606060606067f3e3e3e3e3e3e3e7f06060206060206067f3e3e3e3e3e3e3e7f0606060606067f6764606b686d667f06060206060206067f7a666e6e63727a7f0606060606067f3e3e3e3e3e3e3e7f06061706060206067f7f7f7f7f7f7f7f7f0606060606067f7f7f7f7f7f7f7f7f0606020606020206060606060606060606060606060606060606060606060606060202060606020206060606060606060606060606060606060606060606060602020606060606020202020202020202020202020202020202020202020202020206060606060606060606060606060606060606060606060606060606060606060606067f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f047f7f7f7f7f7f7f7f7f7f7a7b3e7f3e3e3b3e7c7a7f7660786560716471727f047f6f6e6e717a7a7a7f7f3e3e3e3b3e3e7f3e3e3e7f3e3e3e3e3e3e3e3e3e7f047f7a7a676e7472647f7f7a7b3e7f3e3e7f3e7c7a7f7a7a7a686d6d7a7a7a7f047f040404040404047f7f7f7f7f7f3e3e7f3e7c7a7f053e3e3e3e3e3e3e3e7f047f7b04047d04047c7f7f7a7b3e7f3e3e7f7f7f7f7f7d3e3e3e3e3e7d3e7d7f047f040404040404047f7f3e3e3e3b3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7d7f377f7b04047d04047c7f7f7d3e3e7f3e3e3e3e3e3e3e3e3e3e3e3e3e7d7d057f057f040404040404047f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f3e3e3e7f7f7f7f057f7b04047d04047c7f0407070707070707070707070505043e3e3e04050505057f040404040404047f0707070707073707070705050504043e3e3e04040505037f7f7f0404047f7f7f0707070707070707070705050504043e3e3e04040405030303030404040303370407370707070707070505050404053e3e3e05040405050303043e033e0303030404070707070705050505040405053e3e3e050504040505043e3e043e0503033e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e033e050503033e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e043e05050303073e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e0405030307070404070707040404040404040405053e3e3e05050404040404040405050707370407070707070704040404040404053e3e3e05040404040404040404050505050707070737070707040404040404043e3e3e04040404040404040404050505050707070707070707040404040404043e3e3e04040404040404040404050505070707070707070707070404040405023e3e3e02050404040404040405050507070707370707070707070404040505023e3e3e020505040404040404050505070707070707070707070737047f7f7f7f3e3e3e7f7f7f7f0505040405050507070704070707070707070707377fbd3e3e3e3e3e3e3ebd7f0505050505050507073704070707070707070707077fbd3e3e3e3e3e3e3ebd7f7f7f7f7f7f7f7f7f070404070707070707070707057fbd3e3e3e3e3e3e3ebd7f7a656e7166647a7f070404040707070707070705057f3e3e3e3e3e3e3e3e3e3b3e3e3e3e3e3e3e7f040404040707070707070705057f7367647a7a68716e6d7f3e3e3e3e7c7a7a7f040404040407070707070705057f3e3e3e3e3e3e3e3e3e7f02023e3e4646467f040404040404040707070707057f7a7a766e716a727a7a7f02023e3e7d46467f040404040404040404070707077f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f04047f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f3e3e3e3e3e3e3e3e3e3e3c3c7f676e6d6e7160616b647f0505057f7a7b3e3a7f7a7367647a73606f7a7b3c3c7f3e3e3e3e3e3e3e3e3e7f3e3e3e7f3e3e3e7f7f3e3e3e3e3e3e3e3e3e3a3e3e7f7a7a7a686d6d7a7a7a7f3e3e3e3b3e3e7c7f7f3e7c7b3e3e3e7c7b3e7c7a7a7f3e3e3e3e3e3e3e3e3e7f3e3e3e7f7f7f7f7f7f3e3e3e3e3e3e3e3e3e3e3e3e7f3e3e3e3e3e3e3e3e3e3e3e3e3e3b3e3e7c7f7f3e7c7b3e3e3e7c7b3e7c7b3e3b3e3e3e3e3e3e3e3e3e3e3e3e3e7f3e3e3e7f7f3e3e3e3e3e3e3e3e3e3e3e3e7f3e3e3e3e3e3e3e3e3e3e3e3e057f7a7b3e7f7f7f7f7f3e3e3e7f7f7f7f7f7f7f7f7f7f3e3e3e7f7f7f7f7f7f7f7f7f7f7f7f7f0505053e3e3e050504040404040405053e3e3e05050505050505060606067f7f0505053e3e3e050505040404040505053e3e3e05050404040405050606067f7f0505043e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e05040404040404050506067f7f0505043e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e04040404040404040506067f7f0504043e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e04040404040404040505067f3e3e3e3e3e3e3e020202023e3e3e05050404040404040404040404040505067f3e3e3e3e3e3e3e020101023e3e3e05040404040404040404040404050505057f3e3e3e3e3e3e3e020202023e3e3e04040404040404040404040405050505057f7f0505053e3e3e3e3e3e3e3e3e3e0404047f7f7f7f7f7f7f7f7f7f7f0505057f7f0505053e3e3e3e3e3e3e3e3e3e0504047f7f6374646b686d667f7f0505057f7f0505053e3e3e3e3e3e3e3e3e3e0505047f3e3e3e3e3e3e3e3e3e7f0505057f7f040505050504040505053e3e3e0505057f7a7664606f6e6d727a7f0405057f7f040405050404040405053e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f0405057f7f050404040404040405053e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f0404057f7f050504040404040404053e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f0405057f7f060505050404040404040505050505057f7a60716c6e7471787a7f0505057f7f060606050504040404040405050505057f3e3e3e3e3e3e3e3e3e7f0506067f7f060606060605040404040404040405057f7f6b686c687364637f7f0606067f7f444444440605050404040404040404057f7f7f7f7f7f7f7f7f7f7f0606057f7f0404044406060504040404040404040404040404040404050506060504047f7f0404044406060505040404040404040404040404040405050606060404047f7f0404044406060605050404040404040404040404040505050606050404047f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f04040404393904040404040404040404040404040404043939373704040404040404043739020202020202020202020202020202020202023937370404040404040439393939393939393905050505050505050505050539393704040404040404043902393e3e3e3e3e39050505050505050505050505053704040404040404040404023967647161723905373704043704370437043704040404040404040404040402393e3e3e3e3e3937040404040404040404040404040404040404373704040402393e3e3e3e3e3e04040404040404040404040404040404040437373704040402393e3e3e3e3e3904040404040404040404040404040404043739393904040402393939393939390404040404040437043704370437043705053902390404040205050505050537040404040404040505050505050505050505050204040404020505050505053704040404040437057f7f7f7f7f7f7f7f7f7f7f0204040439023905050537370404040404040437057f7367647b3e3e3b3e3e7f0204040439393905373704040404040404040437057f3e3e3e3a3e3e7f7a7a7f0204370437043737040404040404040404040404377f686d6d7b3e3e7f7f7f7f0204040404040404040404040404040404040404043e3e3e3e3e3e3e3e3e3e7f02040404040404040404040404043d0404040404043e3e3e3e3e3e3e3e3e3e7f0204040404040404040404040404040404040404043e3e3e3e3e3e3e3e3e3e7f0204370437043704040404040404040404040404377f656e6e637a7a656e717f0204040439393937040404040404040404040437057f3e3e3e3e3e3e3e3e3e7f0204040439023905370404040404040404040437057f7a73676e746667737a7f0204040404020505370404043737040404040437057f7f7f7f7f7f7f7f7f7f7f020404040402050537040437050537040404040405050505050505050505050502040404040205053704043705050504040404043705050505050505050505050204040404023939393e3e393939053704040404040437043704370437050539023904040402393e7d3e3e7d3839050504040404040404040404040404043739393904040402393e3e3e3e3e3e39050537040404040404040404040404040437373704040402393e3e3e3e3e3e39050505053704040404040404040404040404373704040402396c787273686239050505050505370437043704040404040404040404043902393e3e3e3e3e3e39050505050505050505050505370404040404040404043939396764606b647139050505050505050505050539393704040404040404040437390202020202020202020202020202020202020239373704040404040404040439390404040404040404040404040404040404393937370404040404040404040404393939393939393939393939393939393939393939393939393904040404040339030303050505050303030303030303030304040404040404390404040403033903030505050505040403030303030303040404040404040439040404030302390305050505050404040404030303037f7f7f7f7f7f7f0404390404040303023903050505050504040404050503033e3e3e3e3e3e3e7f04043904040403020203030405050505040404040505057f7664606f6e6d727f04033904040403020203040404050505050404050505057f3e3e3e3e3e3e3e7f0403390404040202020304040404050504040405050505393e3e3e3e3e3e3e7f0303390404020202030304040404040404040404050537053e3e3e3e3e3e3e0303033904040202020304040404040404040404040405050539373e3e3e37030303033904040202020305040404040404040404040404050505053e3e3e05050303033904020202030305050404053e04043e3e043e3e3e053e053e3e3e05050403033904020202030303050505053e3e043e04043e3e3e3e053e05053e050404050339190219191903030505053e3e053e3e3e3e04043e3e3e3e3e0505050505050339033f3f023f3e033e3e3e3e3e050505040404040505053e3e3e050505050606393f3f023f033e03033e3e3e3e3e05040404040505067f3e3e3e377f7f06060639033f3f3f03033e033e053e3e3e04040404050506067f3e3e3e3e3e3e7f060639031a021a1a0303030505053e050404040505060606063e3e3e3e3e3e7f06063904020202030303030405053e3e04047f7f7f7f7f7f7f3e3e3e3e3e3e7f06063904020202030303040404053e3e04047f3e3e3e3e3e7f603e6c6e74717f060639040202020203040404043e040404037f3e6f74617a7f373e3e3e3e3e7f060639040402020203040404043e3e3e04037f3e3e3e3e3e7f7f7f7f7f7f7f3706063904040202020303040404043e3e03037f3e3e3e3e3e7f3e3e3e3e3e3e7f06063904040302020203040404043e03030337033e3e3e3e7f7a656e6e3e3e7f060539040404030202030404043e3e3e030303373e3e3e7f7f3e3e3e3e3e3e7f050539040404030302030404043e04043e3e3e033e3e3e043e3e3e3e3e3e3e7f050439040404040302030304043e3e043e03033e3e3e043e3e3e3e3e3e3e3e7f0404390404040403033903040404043e3e3e033e3e3e043e3e3e3e03033e3e7f040339040404040403390304040404040404040303040404377f7f3703037f7f03033904040404040339030304040404040404040304040404040303030303030303390404040404043903030304040404040403040404040403030303030303030339040404040404393939393939393939393939393939393939393939393939393939393939393939393939393939393939393939393939393939393939393939393904040404040404040404040404040404040404040505050505050505050539390404047f7f7f7f7f7f7f7f04040404040404047f7f7f7f7f7f7f7f050505393904047f7f3e3e3e3e3e3e7f7f7f7f7f7f7f7f7f7f656e6b6b64787f7f0505393904047f7f60716c6e74717f7f47457c7b45477f3e3e3e3e3e3e3e3e7f0505393904047f7d3e3e3e3e3e3e7d7f443e3e3e3e447f7a73607564716d7a7f0505393904047f3e3e3e3e3e3e3e3e493e3e3e3e3e3e7f3e3e3e3e3e3e3e3e7f0504393904047f7a7b3e3e3e3e7c7a7f6c60666862727f7a7b3e3e3e3e7c7a7f0504393904047f7f3e3e3e3e3e3e7f7f3e3e3e3e3e3e7f3e3e3e3e3e3e3e3e7f0404393904047f7f7f3e3e3e3e7f7f7f7f7f7f7f7f7f7f7a7b3e3e3e3e7c7a7f0404393904040405053e3e3e3e0505040404040505057f7f7f7f3e3e7f7f7f7f040439390404040405053e3e05050404040404040405050505053e3e05050504040439390404040405053e3e05050404040404040404040505053e3e05050404040439390404040505053e3e05050504040404040404040404053e3e050404040404393e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e390404040505053e3e0505050404040404040404040404040404040404040439390404040405053e3e05050404040404040404040404040404040404040404393904040404040504040504040404047f7f7f7f7f7f39393939393939393939393904040404040504040504040404047f7d7d3e7d7f04040404390404040404393904040404050504040505040404043b3e3e3e3e3a04040404390404040404393904043939393904043939393904047f3e3e3e7d7f04040404390404040404393904043902040404040404023905047f7d3e3e7d7f0404040439040404040439390404397b0404040404047c3905057f7a7a7a7a7f040404043b0404040439393904053904040404040404043905057f3e3e3e3e7f7d040402397d0402393907390405397a6c60716a64737a3905057f7f7f7f7f7f393939393939393939070739050539040404040404040439050504040404040404050507070707070707083905053939393939393939393905040404040404040407070707070707070808390505050505050504040404040404040404040707070707070808080707080839050505050504040404040404040404040407070708080808080808080808083939393939393939393939393939393939393939070707080808080808080808040404020202020202020202020202020202020202020202020202020202040404040202010101010101010101010101010101010101010101010101010202040402020102020202020202020202020202020202020202020202020202010202040201020237040445040506060606060606060606060505040404040202010204010102377f7f7f497f7f7f060605050606067f7f7f7f7f7f7f7f040402010204010101047f45453e45457f060505050506067f3e3b3e3e3e3e7f7f0402010204010101047f3e453e453e7f060504040505067f3e7f3e3e3e3e3e7f0402010204010101047f3e3e3e3e3e7f050504040405057f3e7f6674686b637f0402010204010101047f6c606668627f050404040405057f3e7f3e3e3e3e3e7f0402010204010101047f3e3e3e3e3e7f040404040404057f3e7f7f7f7f7f7f7f0402010204010101047f7f7f7f7f7f7f040404040404057f3e7f3e3e3e3e7f0404020102040101010404040404040404040404040404057f3e7f60716c727f0404020102040101010404040404040404040404040405057f3e3e3e3e3e3e7f0404020102040101010404040404040404040404040505057f3e3e3e3e7c7a7f040402010219191919193e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f05040201023f3f3f3f3f3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7c7a7f05050201021a1a1a1a1a3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f0605020102040202020605050404043e3e040404050505377f60716c6e74717f0606020102040101010606050505043e3e040505050506067f3e3e3e3e3e3e7f060602010204010101060606067f7f3e3e7f7f06060606067f7f3e3e3e3e7f7f060202010204010101060606067f3e3e3e3e7f0606060606067f7f7f7f7f7f06060201010204010101067f7f7f7f3e3e3e3e7f7f7f7f06060606060606060606020201010204010101067f3e3e3e3e3e3e3e3e3e3e7f06060606060606060202020101010204010101067f7a7b3e7d3e3e7d3e7c7a7f06060606050505020201020202020204010101067f3e3e3e3e3e3e3e3e3e3e7f06060605050402020202020505020204010101067f62606f737a616b60626a7f06060505040417171717040405020204010101067f7f3e3e3e3e3e3e3e3e7f7f0606050404020202020204040402020401010206067f7f73607564716d7f7f06060605020202010202370404020202040201020206067f7f7f7f7f7f7f7f060606020202010101020505040402020204020201020202020202020202020202020202010101010102050505020202040404020201010101010101010101010101010101010101010202020202020204040404020202020202020202020202020202020202020202020202020204040404040404040404040439393939393939393939393939390404040404040404040404040404043939393904047c7564726f64717b04043939393904040404040404040404393939040404043e3e3e3e3e3e3e3e3e3e040404043939390404040404040439390404043e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e04050539390404040404043904043e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e05053904040404043939043e3e3e3e3e3e3e05053e3e3e3e05053e3e3e3e3e3e3e053939040404043904043e3e3e3e04040505053e3e3e3e05050504043e3e3e3e050539040404043904043e3e3e0404050505053e3e3e3e0505050504043e3e3e050539040404393904043e3e3e04047f7f7f7f3e3e3e3e7f7f7f7f04043e3e3e050539390404390404043e3e3e04047f3e3e3e3e3e3e3e3e3e3e7f04043e3e3e040505390404390404053e3e3e04047f3e3e3e3e3e3e3e3e3e3e7f04043e3e3e040405390404390405053e3e3e04047f3e3e303e3e3e3e303e3e7f04043e3e3e040404390404390505053e3e3e04047f3e3e3e3e3e3e3e3e3e3e7f04043e3e3e0404043904043905053e3e3e3e04057f3e3e3e3e3e3e3e3e3e3e7f04043e3e3e3e040439043e3e3e3e3e3e3e3e05057f3e3e303e3e3e3e303e3e7f04043e3e3e3e3e3e3e3e3e3e3e3e3e3e3e0505057f3e3e3e3e3e3e3e3e3e3e7f0504043e3e3e3e3e3e3e3e3e3e3e3e3e050505067f3e3e3e3e3e3e3e3e3e3e7f060504043e3e3e3e3e3e043905050505050506067f3e3e7f7f3e3e7f7f3e3e7f06060504040505053904043905050505050606067f3e3e7f3e3e3e3e7f3e3e7f06060605050505053904043905057f7f7f7f7f7f7f3e3e7f3e3e3e3e7f3e3e7f7f7f7f7f7f7f05053904043905057f3e3e3e3e3e3b3e3e7f60716c727f3e3e7f3e3e3e3e3e7f05053904043905057f3e3e3e3e3e7f3e3e7f3e3e3e3e7f3e3e7f726b64646f7f05053904043905057f7a606b647a7f3e3e7f7f7f7f7f7f3e3e7f3e3e3e3e3e7f05053904043939057f3e3e3e3e3e7f3e3e3e3e3e3e3e7f3e3e3b3e3e3e3e3e7f05393904040439057f7f7f3c7f7f7f3e3e3e3e3e3e3e7f7f7f7f7f7f7a7a7f7f0539040404043905057f7f7f7f3e493e3e3e3e3e3e3e493e3e3c3c7f7f7f7f050539040404043939050506067f3e7f7a6674686b637a7f3e3c3c3c7f060605053939040404040439050505067f3e7f3e3e3e3e3e3e3e7f3c3c3c3c7f060505053904040404040439390505057f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f05050539390404040404040439393905050505050505050505050505050505050539393904040404040404040404393939390505050505050505050505053939393904040404040404040404040404040439393939393939393939393939390404040404040404040404040407070704040407070707080801010101087f7f7f7f7f7f7f7f7f7f7f0404070707070707070808080708080101010108087f3e7f7f7f3e3d3e7f7f7f0407070707070707070708080408010101010808087f3e7f7f3e3e3e3e3e7f7f0407070707040404070707080408010101080808087f4949463e3e3e3e3e467f0707070702020202040407080808010101080707087f7f7f7f3e3e3e3e3e7f7f07070702020101020204070708070101010707070808087f7f3e3e3e3e3e7f7f04070702010000010202040707070101010107070707087f463e3e3e3e3e467f04070402020100000102040404070701010101040407077f7f3e3e3e3e3e7f7f04040404020201010202040404040404010101010404077f7f3e3e3e3e3e7f7f04040704040202020204040404040404040101010404047f463e3e3e3e3e467f04070704040404040404040404040404040101010404047f7f3e3e3e3e3e7f7f04070704040404050505040404040404010101010404057f7f7f3e3e3e7f7f7f04070404040405050505050404040401010101040405057f7f7f7f3e7f7f7f7f04040404040505053e3e3e3e3e3e3e1919193e3e3e0505057f7f7f3e7f7f7f373e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3f3f3f3e3e3e3e0505053e3e3e3e0537043e3e3e3e3e3e3e3e3e3e3e3e3e3e3e1a1a1a3e3e3e3e3e3e3e3e3e3e3e0507373e3e3e3e3e3e3e3e3e3e3e05050504020202053e3e3e3e3e3e3e3e3e0505070704040404040404040505050505040101010105053e3e3e3e3e3e3e0505070707040407040404040404050505040101010105050504043e3e3e04050507070704040707070505040404040404040101010505050404043e3e3e04040507070704070706060605050404040404010101010505040404043e3e3e04050505070707070606060606050505040404013901050505040404043e3e3e050505050507070606060606060606050504040102010505040404047f3e3e3e7f7f7f7f0505070606040404060606060505020101010105040404047f3e3e3e3e3e3e7f0505370605040404040606060502020401010105040404047f3e3e3e3e3e3e7f0505370604044b04040606020202040701010101040404057f3e3e3e3e3e3e7f0507040604040404040202020404040707010101070705057f6764606b64717f0707040606040404040205050404070708010101080707057f3e3e3e3e3e3e7f0707070706060606030305050507070808010101080807077f7f7f7f7f7f7f7f0707070707060603030305070708080801010101080808070707040404070707070707040707070303030707080808010101010808080808080707370707070707070404040707070304040404080101010108080808080807073704370407070404047f7f7f7d7f7f7f05050504040404040404040404040404057f7f7f7d7f7f7f047f3e3e3e3e3e7f3f3f0505040404040404040404040405057f3e3e3e3e3e7f047f3e3e3e3e3e7d3f3f0505050404040404040404040505057d3e3e3e3e3e7f047d3e3e1c3e3e7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f3e3e1c3e3e7d047f3e3e3e3e3e7f6a68736267646d7f7a617168736872677a7f3e3e3e3e3e7f047f3e3e3e3e3e7f3e3e3e3e3e3e3e7f3e3e3e3e3e3e3e3e3e7f3e3e3e3e3e7f047f7f7d7f3e3e7f4b4b3e3e3e7d7d7f3e3e3e7c7a7b3e3e3e7f3e3e7f7d7f7f040505057f3e3e7f7f7f3e3e3e7f7f7f3e303e7d3e7d3e303e7f3e3e7f050505040405057f3e3e7f3e3e3e3e3e3e3e7f3e3e3e3e3e3e3e3e3e7f3e3e7f050504040404057f3e3e7f3e7c7b3e7c7b3e7f3e3e3e3e3e3e3e3e3e7f3e3e7f050404040404047f3e3e3b3e3e3e3e3e3e3e7f3e303e3e3e3e3e303e7f3e3e7f040404040404047f3e3e7f3e7c7b3e7c7b3e7f3e3e3e3e3e3e3e3e3e7f3e3e7f040404040404047f3e3e7f3e3e3e3e3e3e3e7f3e3e3e3e3e3e3e3e3e7f3e3e7f040404040404047f3e3e7f7f7f7f7f7f7f7f7f7f7f7f3e3e3e7f7f7f7f3e3e7f040404040404047f3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f7f7f7f3e3e7f040404040404047f3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3b3e3e7f3e3e7f040404040404047f3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e7f3e3e7f3e3e7f040404040404047f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f3e3e7f3e3e7f040404040404047f3e3e3e3e303e3e3e3e3e3e3e3e7f3e3e3e3e3e3e7f3e3e7f040404040404047f3e3e3e3e3a3e3e3e3e3e3e3e3e3b3e3e3e3e3e3e7f3e3e7f040404040404047f3e3e3e3e303e3e3e3e3e3e3e3e7f3e3e3e3e3e3e7f3e3e7f040404040404047f30303030303e3e3e30303030307f3e3e3e3e3e3e7f3e3e7f040404040404057f3e3e3e3e303e3e3e303e3e3e3e7f3e3e3e3e3e3e7f3e3e7f050404040405057f3e3e3e3e3a3e3e3e303e3e3e3e7f6f7168726e6d7f3e3e7f050504040505057f3e3e3e3e303e3e3e303e3e3e3e7f7f444546477f7f3e3e7f050505047f7f7d7f497f7f7f7f7f7f7f7f7f7f497f7f7f7f7f7f7f7f7f3e3e7f7d7f7f047f3e3e3e3e3e3a3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3a3e3e3e3e3e7f047f3e3e3e3e3e3a3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3a3e3e3e3e3e7f047d3e3e303e3e7f7f7f7f7f7f7f7a7a7a7a7a7f7f7f7f7f7f7f3e3e303e3e7d047f3e3e3e3e3e7d050504370505053e3e3e050505040505057d3e3e3e3e3e7f047f3e3e3e3e3e7f050437040405053e3e3e050504040437057f3e3e3e3e3e7f047f7f7f7d7f7f7f040404040404053e3e3e050404370404047f7f7f7d7f7f7f04";

  var townInhabitants = "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000201c18201c1800012f0f022e0f020010510904500904010e5111115011110009500d11500d110009501c1d501c1d01092c16182c1618010f500709500709010e50070b50070b010e510b0b500b0b010e510b09500b09010e500202500202010951041b50041b0109560f17560f17010d381415381415000c511d05501d0501092f15052e1505010b021508021508000a52151b52151b800052091b52091b800050111d50111d0009500d1d500d1d00090000000000000000000000000000000000000000000000000000000000000000000000000000000059071d58071d0010201d1d201d1d010f511707501707010e560e0c560e0c010d511a11501a110000381b0f381b0f000b381b0d381b0d000b38160f38160f000b2d041b2c041b010a2b021b2a021b010a27021d26021d010a20041d20041d010a200f17200f170009260302260302010820060e20060e000c51181b50181b000050061b50061b000053190b52190b000021130b20130b000750120f50120f0006510f0f500f0f0006260a04260a040005201502201502010450111c50111c0003510d1c500d1c00031f110a1f110a00021f100a1f100a000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000261d1a261d1a00102b120c2a120c000f580918580918000e2c1c062c1c06000d291d02281d02000c271609261609000b231502221502000a52100552100500095a0f155a0f1500085402145402140007510c0c500c0c000650090c50090c000650111a50111a0006510d1a500d1a00065006105006100105501b0e501b0e0105511a1b501a1b010550041b50041b010551020250020201053d09163d09160004521617521617010353131052131080001f0b071f0b0700021f0a071f0a07000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002a0e152a0e150010850f02840f02010f240305240305010e580b1d580b1d000d50031a50031a000c511b1a501b1a000b25161a24161a010a25081a24081a01095107095007090008500707500707000851070850070800085017075017070008501708501708000851170950170900085111095011090007510d09500d090007240c0c240c0c00062c09102c091001052c06102c061001052518112418110004381a0c381a0c00035111195011190001500d19500d19000152161352161380001f0f071f0f07000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020100f20100f01105b1c115a1c11000f570407560407010e20060e20060e000d52151c52151c000c580216580216000b21150a20150a000a20031b20031b000921051c20051c0108381c16381c1600072e1c142e1c140006530519520519010052191c52191c8000521a0d521a0d80005b18065a1806010520140620140600042b12062a120600035312015212018000221c03221c0300022108052008050001230115220115000e26041b26041b010d5b0e1d5a0e1d010a5b101d5a101d010a5b101b5a101b010a59130958130900102e0f1c2e0f1c010b2e1e022e1e02010f500e04500e04000938011a38011a000c510111500111000951010d50010d0009241403241403010725110524110501072514052414050007000000000000000055110354110300082508062408060107230404220404010550141650141600045114195014190004561d1d561d1d01025b1b1c5a1b1c00035a1c1b5a1c1b0003531a0d521a0d010052140152140180005212075212078000520508520508010053050252050280005b1d1c5a1d1c000353041e52041e8000541c1d541c1d00015112145012140000500413500413000050050a50050a01000000000000000000000000000000000051150e50150e0000250b12240b12011025140f24140f010f250f07240f07010e520b17520b17010d2c15192c1519000c530101520101800be3011ee0011e010a241b14241b140009521b0c521b0c0008510511500511000750050d50050d0007510311500311000750030d50030d00072416082416080106251a06241a06010538050838050800042f1b182e1b1801032405172405170002530805520805010053090552090501005307055207050100521804521804800052180a52180a8000521912521912800052161b52161b000024101a24101a0001000000000000000026160326160301102603182603180110271016261016011027161126161101102712112612110110500512500512000f510b0e500b0e000f531809521809010e531609521609010e591718581718000d5a0d195a0d19000c00000000000000002c05162c0516010b00000000000000002d07172c0717010b520d05520d05010a590d08580d080009590d09580d09000927040f26040f0008260607260607000726070626070600074b06064b060600062717082617080005271e11261e11000452161a52161a80005207195207198000501107501107010351120c50120c000350180e50180e000250160e50160e00022706052606050001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500111500111001051010d50010d00105112185012180010500e18500e180010511b0f501b0f0010510e11500e110010501211501211001050120d50120d0010500e0d500e0d0010281713281713010f280e04280e04000e290a1d280a1d000d2f1c182e1c18000c220e1a220e1a010b290511280511000a5a06035a060301092d13062c13060008531c09521c090007521a07521a070006591c03581c0300055a1d075a1d070004581805581805000329191c28191c0102530f1d520f1d8000530f02520f028000291909281909000100000000000000000000000000000000000000000000000000000000000000005110185010180010511014501014001051030950030900105107095007090010511409501409001051100950100900100000000000000000200c1c200c1c010f51010d50010d000e510111500111000e251004241004000d2a07162a0716010c211c16201c16000a52190352190301092a060f2a060f00082b180d2a180d010b5b1e1e5a1e1e00075c1d1d5c1d1d01002a14172a141700062418152418150005c41e09c41e090004240807240807000320011e20011e0002521619521619010052151352151380005211025211028000520401520401ff002a02052a02050001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b1d095a1d09000f580b03580b03000e3d0c0f3d0c0f000d240c10240c10000c220d0f220d0f000b200c0e200c0e000a25091a24091a00092d1a0f2c1a0f01085c060a5c060a01005c05155c05150100530c1d520c1d01072d1d022c1d020006590200580200000521080520080500042d16102c16100003380a18380a180002521812521812800053150c52150c8000530503520503010052061c52061c80002d0a0f2c0a0f00010000000000000000000000000000000000000000000000000000000000000000cd1e01cc1e01ff0ff0090ff0090f00109e0e079c0e07010ec71719c41719010dc51716c41716000cc71115c41115000bc70902c40902000ac60803c408030009c50701c407010008c50c19c40c1901079f17069c170600069d19049c190400059d1a129c1a1200049d1b1e9c1b1e01029f1e1b9c1e1b01029c1c1d9c1c1d01029e1d1c9c1d1c01029c1e1c9c1e1c01029c1c1e9c1c1e01029f1d1d9c1d1d01029c1d1e9c1d1e01029e1e1d9c1e1d01029d1e1e9c1e1e01029d0e0f9c0e0f01029c12139c12130002c71416c414160102c71315c4131500032e011e2e011e0001000000000000000000000000000000000000000000000000540114540114000f57080f56080f010e250506240506000d250505240505000c5b0e0b5a0e0b010b2c011e2c011e000a2f161f2e161f000927061926061900082409052409050007200c02200c02000652170852170800052014062014060004241b08241b080003521b19521b190002521119521119800050090d50090d00005d17165c17160100151b14151b140100141a16141a160100510f11500f11000051160d50160d00005c16155c1615ff00141e14141e1401105306035206038000530f08520f0880005219045219040100521604521604010052071b52071b800050041050041000010000000000000000ff0a07fc0a07ff00521109521109000ecb1710c81710000de10e06e00e06000cc2060bc0060b010ba41b0aa41b0a000ae21b1ce01b1c0009881e15881e15ff00890208880208ff00880214880214ff00cb190cc8190c000820061c20061c0007ca1806c818060105c80c18c80c1801035311185211180010cb0b15c80b150003280718280718000fca0f18c80f180103c80616c806160003cb0a13c80a13000451130e50130e0002510c12500c12000251091250091200022c0f162c0f16000653081a52081a8000521612521612010052180a52180a01005218085218080100520809520809000051050e50050e0001510510500510000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c90715c8071501102b0f132a0f13000f5a19095a1909010e57060b56060b010d2e09122e0912000c2d131e2c131e010b511419501419000a2e130b2e130b00092e140a2e140a00082e14092e140900072e12092e12090006530d19520d190105290f18280f1801042e091b2e091b00035208175208178000530f1b520f1b0180530f15520f1580005317145217140100501d0d501d0d0002511d11501d110002500211500211000250020d50020d0002e11002e010020001e20f02e00f02000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020031a20031a0010210419200419000f210318200318000e210219200219000d260f09260f09000c521a18521a18000b8a0f128a0f12010a2613042613040009e01d19e01d190008521319521319000755141854141800063d1b013d1b010005e00308e003080004530c19520c190003260a0f260a0f000253191b52191b80005a0c035a0c0300010000000000000000000000000000000000000000000000005b0a0c5a0a0c01005b0d0a5a0d0a01005a0d085a0d0801005715095615090103500410500410010450020250020201045904165804160007511c02501c020104501c1d501c1d010451161b50161b0104e2021de0021d01085904145804140007590714580714000758041258041200075805135805130007b30e17b00e17000650140d50140d000451120d50120d0004530b06520b060105530906520906010550111d50111d0000510d1d500d1d0000500c13500c1301045112125012120004511214501214000457130a56130a010355110b54110b000052110852110800025e13075e13070001";
 
  function rleDecode(data) {
    var buf = "";
    for (var i=0; i<data.length; i++) {
      var c = data.charCodeAt(i);
      if (c >= 128) {
        var code = c & 7;
        var n = (c>>3) & 15;
        if (n == 0)
          n = data.charCodeAt(++i);
        for (var j=0; j<n; j++)
          buf += String.fromCharCode(code);
      } else {
        buf += String.fromCharCode(c);
      }
    }
    return buf;
  }

  return {
    tiles: tiles,
    worldMap: rleDecode(atob(rleMapData)),
    font: font,
    townMaps: townMaps,
    townInhabitants: townInhabitants
  };
}());

ultima4.main = (function() {
  function parseHexByte(s, n) {
    return parseInt(s.substr(n*2, 2), 16);
  }

  function getTileAt(x, y, town) {
    var tile = getInhabitantTileAt(x, y, town);
    if (tile)
      return tile;
    else if (openDoor && openDoor.x==x && openDoor.y==y)
      return tileType.stoneFloor;
    else
      return typeof town == "undefined" || town == null ? 
      getMapTileAt(x, y) : 
      getTownTileAt(x, y, town);      
  }

  function getMapTileAt(x, y) {
    return worldMap.charCodeAt(y*256+x);
  }

  function getTownTileAt(x, y, town) {
    return (x>=0 && x<32 && y>=0 && y<32) ?
      parseHexByte(townMaps, town*1024 + y*32 + x) : tileType.grass;
  }
  
  function getInhabitantTileAt(x, y, town) {
    if (town!=null && town>=0 && town<=16) {
      var a = townInhabitants[town];
      var tile = null;
      a.forEach(function(h) {
        if (h.x==x && h.y==y)
          tile = (h.tile & 0xFE) | randomIntBetween(0, 1);
      });
      return tile;
    } 
  }

  function drawChar(g, c, fgColor, bgColor, x, y) {
    if(c>=0 && c<=127) {
      for (var row=0; row<8; row++) {
        var b =  parseHexByte(ultima4.gameData.font, c*8 + row)
        for (var i=7; i>=0; i--) {
          g.fillStyle = (b & (1<<i)) ? fgColor : bgColor;
          g.fillRect(x+8*2-(i+1)*2, y+row*2, 2, 2);
        }        
      }
    }
  }

  function drawText(g, s, fgColor, bgColor, x, y) {
    for (var i=0; i<s.length; i++) 
      drawChar(g, s.charCodeAt(i), fgColor, bgColor, x+i*8*2, y);
  }

  function drawCharLine(g, c, fgColor, bgColor, x, y, dx, dy, n) {
    for (var i=0; i<n; i++, x+=dx, y+=dy) 
      drawChar(g, c, fgColor, bgColor, x, y);
  }

  function drawTile(g, tile, x, y, frame) {
    if (typeof frame == "undefined")
      frame = 0;
    frame = tilesAnimated.indexOf(tile) == -1 ? 0 : frame % 16;
    g.drawImage(tiles, (tile%16)*16, Math.floor(tile/16)*16, 16, 16-frame, x, y+frame*2, 32, 32-frame*2);
    g.drawImage(tiles, (tile%16)*16, Math.floor(tile/16)*16+16-frame, 16, frame, x, y, 32, frame*2);
  }

  function drawViewport(g, mapX, mapY, town, frame) {
    var ox = 16 + 5*32;
    var oy = 16 + 5*32;
    for (var y=-5; y<=5; y++) {
      for (var x=-5; x<=5; x++) {
        var  tile = !isTileInLineOfSight(x, y, town) ? tileType.empty : getTileAt(mapX+x,mapY+y,town);
        drawTile(g, tile, ox + x*32, oy + y*32, frame);
      }
    }

    drawTile(g, 31, ox, oy);

    function isInViewport(x, y) {
      return x>=mapX-5 && x<=mapX+5 && y>=mapY-5 && y<=mapY+5;
    }

    function isTileInLineOfSight(x, y, town) {
      var blockingTiles = numberOfSightBlockersOnLine(0, 0, x, y, town);
      if (blocksView(getTileAt(mapX+x,mapY+y,town)) && blockingTiles <= 1) {
        return true;
      } else {
        return blockingTiles == 0;
      }
    }

    function blocksView(tile) {
      return [tileType.mountain, tileType.forest, tileType.wall, tileType.wallSecretDoor].indexOf(tile) != -1;
    }

    function numberOfSightBlockersOnLine(x0, y0, x1, y1, town) {
      var origX1 = x1;
      var origY1 = y1;
      var steep = Math.abs(y1-y0) > Math.abs(x1-x0);
      if (steep) {
        var tmp = x0;
        x0 = y0;
        y0 = tmp;
        tmp = x1;
        x1 = y1;
        y1 = tmp;
      }

      if (x0 > x1) {
        var tmp = x0;
        x0 = x1;
        x1 = tmp;
        tmp = y0;
        y0 = y1;
        y1 = tmp;
      }

      var deltaX = x1 - x0;
      var deltaY = Math.abs(y1 - y0);
      var error = 0;
      var deltaError = deltaY/deltaX;
      var ystep = (y0 < y1) ? 1 : -1;
      var y = y0;
      var blockingTiles = 0;
      for (var x=x0; x<=x1; x++) {
        var tile = steep ? getTileAt(mapX+y,mapY+x,town) : getTileAt(mapX+x,mapY+y,town);
        if (!(y == 0 && x == 0) && blocksView(tile)) {
          blockingTiles += 1;
        }
        error = error + deltaError;
        if (error >= 0.5) {
          y += ystep;
          error -= 1.0;
        }
      }
      return blockingTiles;
    }
  }

  function drawScreenFrames(g) {
    frameCharLines.forEach(function(l) {
      drawCharLine(g, l[0], palette[14], palette[l[1]], l[2], l[3], l[4], l[5], l[6]); 
    });
  }

  function update() {
    var time = new Date().getTime();
    var wasWork = false;
    if (key == keys.F1)
      isPause = !isPause;
    if (!isPause) {     
      frame++;
      if(frame > frameLastCommand + 32*4)
        key = keys.Space;
      if(key) {
        window.console.log("update(): frame: "+ frame + ", key: "+ key);
        var command = activeCommand ? activeCommand : commands[key];
        if (command) {
          if(command(activeCommand ? key : null)) {
            round++;
            frameLastCommand = frame;
            activeCommand = null;   // Command ready, no input neede
            console.writePrompt();
          } else  {
            activeCommand = command;  // Input needed
          }
        } else {
          if (key != keys.F1) {
            console.write("WHAT?\n\n");
            console.writePrompt();
          }
        }
        wasWork = true;
      } else
        console.drawCursor(canvas.getContext("2d"));      
      if (openDoor && round>openDoor.openRound+4)
        openDoor = null;
      repaint();
    }
    key = null;
    time = new Date().getTime() - time;
    if (wasWork)
      window.console.log("frame time: "+ time +" ms");
    setTimeout(update, Math.max(50, frameTimeMs - time));
  }

  function repaint() {
    var g = canvas.getContext("2d");
    if (hints.clearScreen) {
      g.fillStyle = '#000';
      g.fillRect(0, 0, canvas.width, canvas.height);
      hints.clearScreen = false;
    }
    if (hints.redrawScreenFrames) {
      drawScreenFrames(g);
      hints.redrawScreenFrames = false;
    }
    drawViewport(g, state.x, state.y, state.town, frame);
    if (hints.drawInfo) {
      drawText(g, "1-TSU      125G", palette[1], palette[0], 24*16, 1*16);
      drawText(g, "2-MKA      125G", palette[1], palette[0], 24*16, 2*16);
      drawText(g, "F:0200   G:0200", palette[1], palette[0], 24*16, 10*16);
      drawText(g, "WIND SOUTH", palette[1], palette[0], 7*16, 23*16); 
      hints.drawInfo = false;
    }
    if (hints.drawConsole) {
      console.draw(g);
      hints.drawConsole = false;
    }
  }

  function mutatePosByDir(pos, dir) {
    var m = dirPosMutations[dir];
    return m ? { x: pos.x+=m.x, y: pos.y+=m.y } : pos;
  }

  function mutateNorth(state) {
    return { x: state.x, y: state.y - 1 };
  }

  function mutateEast(state) {
    return { x: state.x + 1, y: state.y };
  }

  function mutateSouth(state) {
    return { x: state.x, y: state.y + 1 };
  }

  function mutateWest(state) {
    return { x: state.x - 1, y: state.y };
  }

  function moveCommand(mutator, displayName) {
    return function() {
      var s = displayName;
      var newState = mutator(state);
      var tile = getTileAt(newState.x, newState.y, state.town);
      if (canWalkOn(tile)) {
        if (canMoveTo(tile)) {
          state.x = newState.x;
          state.y = newState.y;
        } else {
          s += "\nSLOW PROGRESS!";
        }
      } else {
        s += "\nBLOCKED!";
      }
      if (state.town!=null && (state.x<0 || state.x>31 || state.y<0 || state.y>31)) {
        state.x = state.worldX;
        state.y = state.worldY
        state.town = null;
        s += "\nLEAVING...";
      } 
      console.write(s+"\n\n");
      return true;
    };

    function canWalkOn(tile) {
      return tilesCanWalkOn.indexOf(tile) != -1;
    }

    function canMoveTo(tile) {
      var difficulty = terrainDifficulty[tile];
      if (difficulty) {
        return randomIntBetween(0, difficulty) > 0;
      } else {
        return true;
      }
    }
  }

  function randomIntBetween(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  function padStringCenter(s, len) {
    if (typeof len == "undefined")
      len = 15;
    if(s.length < len)
      for(var i=(len - s.length)/2; i>0; i--)
        s = " " + s;
    return s;
  }

  function isDirKey(key) {
    return [keys.left, keys.right, keys.up, keys.down].indexOf(key) != -1;
  }

  function getDirKeyName(key) {
    return dirKeyNames[key];
  }

  function commandEnter() {
    var s = "Enter ";    
    if(state.town == null) {
      var loc = getLocation(state.x, state.y);
      var type = getTileAt(state.x, state.y, state.town);
      if(loc) {
        switch (type) {
        case tileType.shrine:
          s += "the\nshrine of\n"+ loc.name;
          s += "\n\nTHOU DOST NOT\nBEAR THE RUNE\nOF ENTRY! A\nSTRANGE FORCE\nKEEPS YOU OUT!\n"
          break;
        case tileType.dungeon:
          s += "dungeon!\n\n" + padStringCenter(loc.name);
          break;
        case tileType.village:          
          state.town = loc.id;
          state.worldX = state.x;
          state.worldY = state.y;
          state.x = 1;
          state.y = 15;
          s += "village!\n\n" + padStringCenter(loc.name);
          break;
        case tileType.town:
          state.town = loc.id;
          state.worldX = state.x;
          state.worldY = state.y;
          state.x = 1;
          state.y = 15;
          s += "towne!\n\n" + padStringCenter(loc.name);
          break;
        case tileType.castle:
        case tileType.LBCastleCenter:
          state.town = loc.id;
          state.worldX = state.x;
          state.worldY = state.y;
          state.x = 15;
          state.y = 30;
          s += "castle!\n\n" + padStringCenter(loc.name);
          break;
        }
      } else
        s += "WHAT?";
    } else
      s += "WHAT?";
    console.write(s + "\n\n");
    return true;
  }
  
  function commandOpen(key) {
    if (key == null) {
      console.write("Open-");
      openDoor = null;
      return false;
    } else {
      var s, pos=null;
      if (isDirKey(key)) {
        s = getDirKeyName(key);
        pos = mutatePosByDir( {x: state.x, y: state.y }, key);
      } else {
        s = String.fromCharCode(key);
      }        
      console.write(s+"\n");
      var tile = pos ? getTownTileAt(pos.x, pos.y, state.town) : null;
      switch (tile) {
      case tileType.doorUnlocked:
        console.write("OPENED!\n\n");
        openDoor = { x: pos.x, y: pos.y, openRound: round };
        break;
      case tileType.doorLocked:
        console.write("CAN'T!\n\n");
        break;
      default:
        console.write("NOT HERE!\n\n");
      }
      return true;
    }
  }

  function commandPass() {
    console.write("Pass\n\n");
    return true;
  }

  function commandTalk(key) {
    if (key == null) {
      console.write("Talk-");
      return false;
    } else {
      if (isDirKey(key)) {
        console.write(getDirKeyName(key));
        console.write("\nFUNNY, NO\nRESPONSE!\n\n");
      } else {
        console.write(String.fromCharCode(key));
        console.write("\nPass\n\n");
      }
      return true;
    }
  }

  function commandVolume() {
    console.write("Volume OFF\n\n");
    return true;
  }

  function keyDown(e) {
    key = e.keyCode;
  }

  function createCanvas() {
    var canvas = document.createElement("canvas");
    canvas.width = 320*2;
    canvas.height = 200*2;
    return canvas;
  }

  function createConsole() {
    var height = 12;
    var width = 15;
    var lines = [""];
    var promptCode = 30;
    var cursorCode = 124;

    function write(str) {
      str.split("\n").forEach(function(s, i) {
        if (i > 0) {
          if (lines.length == height) 
            lines.shift();
          lines.push("");
        }
        lines[lines.length-1] += s;
      });
      hints.drawConsole = true;
    }

    function writePrompt() {
      write(String.fromCharCode(promptCode));
    }

    function drawCursor(g) {
      drawChar(g, cursorCode+3-(frame%4), palette[1], palette[0], (24+lines[lines.length-1].length)*16, (11+lines.length)*16);
    }

    function draw(g) {
      g.fillStyle = '#000';
      g.fillRect(24*16, 12*16, width*16, height*16);
      lines.forEach(function(s, i) {
        if(s.charCodeAt(0) == promptCode) {
          drawChar(g, promptCode, palette[14], palette[0], 24*16, (12+i)*16);
          drawText(g, s.substr(1), palette[1], palette[0], 25*16, (12+i)*16);
        } else
          drawText(g, s, palette[1], palette[0], 24*16, (12+i)*16);
      });
      drawCursor(g);
    }

    return {
      write: write,
      writePrompt: writePrompt,
      draw: draw,
      drawCursor: drawCursor
    };
  }

  function createTiles() {
    var tiles = new Image();
    tiles.src = ultima4.gameData.tiles;
    tiles.onload = onFinishedLoading;
    return tiles;
  }

  function onFinishedLoading() {
    console.write("Welcome to\n");
    console.write("Ultima IV\n\n");
    console.writePrompt();
    repaint();
  }

  function getLocation(x, y) {
    var hit = locations.filter(function(p){ return p.x==x && p.y==y });
    return hit ? hit[0] : null;
  }

  var keys = {
    Space: 32,
    up: 38,
    left: 37,
    down: 40,
    right: 39,
    F1: 112, 
    E: "E".charCodeAt(0),
    O: "O".charCodeAt(0),
    T: "T".charCodeAt(0),
    V: "V".charCodeAt(0),
    Z: "Z".charCodeAt(0)
  };

  var tileType = {
    deepOcean: 0,
    ocean: 1,
    river: 2,
    swamp: 3,
    grass: 4,
    bushes: 5,
    forest: 6,
    hill: 7,
    mountain: 8,
    dungeon: 9,
    town: 10,
    castle: 11,
    village: 12,
    LBCastleLeft: 13,
    LBCastleCenter: 14,
    LBCastleRight: 15,
    tileFloor: 0x16,
    stoneBridge: 0x17,
    woodenBridgeTop: 0x19,
    woodenBridgeBottom: 0x1a,
    ladderUp: 0x1b,
    ladderDown: 0x1c,
    ruins: 0x1d,
    shrine: 0x1e,
    doorLocked: 0x3a,
    doorUnlocked: 0x3b,
    stoneFloor: 0x3e,
    woodenfloor: 0x3f,
    wallSecretDoor: 0x49,
    empty: 69,
    wall: 0x7f
  };

  var terrainDifficulty = (function() {
    var a = {};
    a[tileType.forest] = 2;
    a[tileType.hill] = 2;
    a[tileType.swamp] = 2;
    a[tileType.bushes] = 10;

    return a;
  }());

  var tilesCanWalkOn = [tileType.swamp, tileType.grass, tileType.bushes, tileType.forest, tileType.hill, tileType.dungeon, tileType.town, tileType.castle, tileType.village, tileType.LBCastleCenter, tileType.stoneFloor, tileType.woodenFloor, tileType.stoneBridge, tileType.woodenBridgeTop, tileType.woodenBridgeBottom, tileType.ruins, tileType.shrine, tileType.wallSecretDoor, tileType.tileFloor, tileType.ladderUp, tileType.ladderDown];
  var tilesAnimated = [tileType.deepOcean, tileType.ocean, tileType.river];

  var state = {
    x: 86,
    y: 108,
    town: null,
    food: 10000,
    gold: 200,
    readInput: null
  };

  var palette = ["#000000", "#FDFEFC", "#BE1A24", "#30E6C6",
                 "#B41AE2", "#1FD21E", "#211BAE", "#DFF60A", 
		 "#B84104", "#6A3304", "#FE4A57", "#424540",
		 "#70746F", "#59FE59", "#5F53FE", "#A4A7A2"];

  var console = createConsole();
  var worldMap = ultima4.gameData.worldMap;
  var townMaps = ultima4.gameData.townMaps;
  var townInhabitants = (function() {
    var s = ultima4.gameData.townInhabitants;
    var towns = new Array();
    for (var j=0; j<=16; j++) {
      var a = new Array();
      for(var i=0; i<32; i++) {
        var tile = parseHexByte(s, j*256+i*8);
        if(tile != 0) 
          a.push({tile: tile, 
                  x: parseHexByte(s, j*256+i*8+1),
                  y: parseHexByte(s, j*256+i*8+2)});
      }
      towns[j] = a;
    }
    return towns;
  }());

  var tiles = createTiles();
  var canvas = createCanvas();
  var commands = (function() {
    var map = {};
    map[keys.up] = moveCommand(mutateNorth, "North");
    map[keys.right] = moveCommand(mutateEast, "East");
    map[keys.down] = moveCommand(mutateSouth, "South");
    map[keys.left] = moveCommand(mutateWest, "West");
    map[keys.Space] = commandPass;
    map[keys.E] = commandEnter;
    map[keys.O] = commandOpen;
    map[keys.T] = commandTalk;
    map[keys.V] = commandVolume;
    return map;
  }());
  var frame = 0;
  var frameLastCommand = 0;
  var frameTimeMs = 200;
  var round = 0;
  var key = null;
  var activeCommand = null;
  var openDoor = null;
  var isPause = false;
  
  var dirKeyNames = (function() {
    var m = {};
    m[keys.up] = "North";
    m[keys.down] = "South";
    m[keys.left] = "West";
    m[keys.right] = "East";
    return m;
  }());

  var dirPosMutations = (function() {
    var m = {};
    m[keys.up] = { x: 0, y: -1 };
    m[keys.down] = { x: 0, y: +1 };
    m[keys.left] = { x: -1, y: 0 };
    m[keys.right] = { x: +1, y: 0};
    return m;
  }());

  var locations = [
    { id: 0, x: 86, y: 107, name: "BRITANNIA" },
    { id: 1, x: 218, y: 107, name: "THE LYCAEUM" },
    { id: 2, x: 28, y: 50, name: "EMPATH ABBEY" },
    { id: 3, x: 146, y: 241, name: "SERPANTS HOLD" },
    { id: 4, x: 232, y: 135, name: "MOONGLOW" },
    { id: 5, x: 82, y: 106, name: "BRITAIN" },
    { id: 6, x: 36, y: 222, name: "JHELOM" },
    { id: 7, x: 58, y: 43, name: "YEW" },
    { id: 8, x: 159, y: 20, name: "MINOC" },
    { id: 9, x: 106, y: 184, name: "TRINSIC" },
    { id: 10, x: 22, y: 128, name: "SKARA BRAE" },
    { id: 11, x: 187, y: 169, name: "MAGINCIA" },
    { id: 12, x: 98, y: 145, name: "PAWS" },
    { id: 13, x: 136, y: 158, name: "BUCCANEERS DEN" },
    { id: 14, x: 201, y: 59, name: "VESPER" },
    { id: 15, x: 136, y: 90, name: "COVE" },
    { id: 16, x: 240, y: 73, name: "DECEIT" },
    { id: 17, x: 91, y: 67, name: "DESPISE" },
    { id: 18, x: 72, y: 168, name: "DASTERD" },
    { id: 19, x: 126, y: 20, name: "WRONG" },
    { id: 20, x: 156, y: 27, name: "COVETOUS" },
    { id: 21, x: 58, y: 102, name: "SHAME" },
    { id: 22, x: 239, y: 240, name: "HYLOTHE" },
    { id: 23, x: 233, y: 233, name: "THE GREAT\n\tSTYGIAN ABYSS!" },
    { id: 24, x: 233, y: 66, name: "HONESTY" },
    { id: 25, x: 128, y: 92, name: "COMPASSION" },
    { id: 26, x: 36, y: 229, name: "VALOR" },
    { id: 27, x: 73, y: 11, name: "JUSTICE" },
    { id: 28, x: 205, y: 45, name: "SACRIFICE" },
    { id: 29, x: 81, y: 207, name: "HONOR" },
    { id: 30, x: 231, y: 216, name: "SPIRITUALITY" },
    { id: 31, x: 231, y: 216, name: "HUMILITY" } ];

  var frameCharLines = [
    [16, 0, 0, 0, 0, 0, 1],
    [4, 1, 16, 0, 16, 0, 9],
    [30, 0, 10*16, 0, 0, 0, 1],
    [28, 0, 13*16, 0, 0, 0, 1],
    [4, 1, 14*16, 0, 16, 0, 9],
    [0, 0, 23*16, 0, 0, 0, 1],
    [4, 1, 24*16, 0, 16, 0, 15],
    [18, 0, 39*16, 0, 0, 0, 1],
    [10, 1, 0, 16, 0, 16, 22],
    [20, 0, 0, 23*16, 0, 0, 1],
    [2, 1, 16, 23*16, 16, 0, 5],
    [30, 0, 6*16, 23*16, 0, 0, 1],
    [28, 0, 17*16, 23*16, 0, 0, 1],
    [2, 1, 18*16, 23*16, 16, 0, 5],
    [12, 1, 23*16, 16, 0, 16, 8],
    [8, 1, 23*16, 9*16, 0, 0, 1],
    [12, 1, 23*16, 10*16, 0, 0, 1],
    [8, 1, 23*16, 11*16, 0, 0, 1],
    [12, 1, 23*16, 12*16, 0, 16, 11],
    [10, 1, 23*16, 23*16, 0, 0, 1],
    [8, 1, 39*16, 16, 0, 16, 8],
    [0, 1, 39*16, 9*16, 0, 0, 1],
    [8, 1, 39*16, 10*16, 0, 0, 1],
    [6, 1, 24*16, 9*16, 16, 0, 15],
    [6, 1, 24*16, 11*16, 16, 0, 15],
    [4, 1, 39*16, 11*16, 0, 0, 1]];

  var hints = {
    redrawScreenFrames: true,
    clearScreen: true,
    drawConsole: true,
    drawInfo: true
  };

  document.write("<body>");
  document.onkeydown = keyDown;
  document.body.appendChild(canvas);
  update();
}());